<!DOCTYPE html>
<html>
  <head>
    <title>GalaxyJS - Welcome</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/styles.css" />
    <script src="https://rawgit.com/x-tag/core/master/dist/x-tag-core.min.js"></script>
    <script src="http://vuejs.org/js/vue.js"></script>
    <script src="galaxyjs/build.js"></script>

    <script>

      (function () {
        window.addEventListener('load', run);

        function run() {
          var dependecies = {
            styles: {
              id: 'styles',
              url: 'styles/component.html'
            }
          };

          var components = {
            start: {
              title: 'Start',
              id: 'start',
              url: 'start/component.html'
            },
            api: {
              title: 'API',
              id: 'api',
              url: 'api/component.html'
            },
            guide: {
              title: 'Guide',
              id: 'guide',
              url: 'guide/component.html'
            },
            tags: {
              title: 'Tags',
              id: 'tags',
              url: 'tags/component.html'
            },
            themes: {
              title: 'Themes',
              id: 'themes',
              url: 'themes/component.html'
            }
          };

          var mainNav = new Vue({
            el: '#main_nav',
            data: {
              navs: components,
              currentApp: ''
            }
          });

          Galaxy.init();


          Galaxy.on('app', function (full, app) {
            if (components[app]) {
              mainNav.currentApp = app;
              Galaxy.load(components[app], function (module, html) {
                Galaxy.ui.setContent(document.querySelector('#content'), html);

                if (module.start) {
                  module.start();
                }
              });
            } else {
              alert('Component not found: ' + app);
            }
          });

          Galaxy.start();

          Galaxy.app.setParamIfNull('app', 'start');
        }

      })();

    </script>
  </head>
  <body>

    <nav id="main_nav" class="main-nav">
      <a v-for="nav in navs"
         v-bind:href="'#app=' + nav.id"
         v-bind:class="{ 'active': nav.id === currentApp }">
        {{ nav.title }}
      </a>
    </nav>

    <div id="content" class="main-content"></div>
    
  </body>
</html>