"use strict";function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){asyncGeneratorStep(r,t,n,o,i,"next",e)}function i(e){asyncGeneratorStep(r,t,n,o,i,"throw",e)}o(void 0)})}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t,n,a,r,o,i,s,u,c,l;function p(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function v(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function m(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function _(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(a&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&a&&s(e))this._bodyArrayBuffer=_(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=_(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=y(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,r=y(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=v(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(e,t){var n,r,o=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function w(e){var o=new FormData;return e.trim().split("&").forEach(function(e){var t,n,r;e&&(n=(t=e.split("=")).shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," "),o.append(decodeURIComponent(n),decodeURIComponent(r)))}),o}function E(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}e.fetch||(t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,a="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),r="FormData"in e,(o="ArrayBuffer"in e)&&(i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&-1<i.indexOf(Object.prototype.toString.call(e))}),h.prototype.append=function(e,t){e=p(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},h.prototype.delete=function(e){delete this.map[p(e)]},h.prototype.get=function(e){return e=p(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(p(e))},h.prototype.set=function(e,t){this.map[p(e)]=d(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),f(n)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),f(t)},h.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),f(n)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},b.call(g.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e},l=[301,302,303,307,308],E.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},e.Headers=h,e.Request=g,e.Response=E,e.fetch=function(n,o){return new Promise(function(r,e){var t=new g(n,o),i=new XMLHttpRequest;i.onload=function(){var e,o,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",o=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t,n=e.split(":"),r=n.shift().trim();r&&(t=n.join(":").trim(),o.append(r,t))}),o)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var n="response"in i?i.response:i.responseText;r(new E(n,t))},i.onerror=function(){e(new TypeError("Network request failed"))},i.ontimeout=function(){e(new TypeError("Network request failed"))},i.open(t.method,t.url,!0),"include"===t.credentials?i.withCredentials=!0:"omit"===t.credentials&&(i.withCredentials=!1),"responseType"in i&&a&&(i.responseType="blob"),t.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(void 0===t._bodyInit?null:t._bodyInit)})},e.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0),"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n}),function(e){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof e.CustomEvent&&(t.prototype=e.Event.prototype,e.CustomEvent=t)}("undefined"!=typeof self?self:void 0),function(e){e.Reflect=e.Reflect||{deleteProperty:function(e,t){delete e[t]}}}("undefined"!=typeof self?self:void 0),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}("undefined"!=typeof self?self:void 0,function(){function u(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,t=void 0,o=void 0,a=function(e,t){d[r]=e,d[r+1]=t,2===(r+=2)&&(o?o(f):_())};var e="undefined"!=typeof window?window:void 0,i=e||{},s=i.MutationObserver||i.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(f,1)}}var d=new Array(1e3);function f(){for(var e=0;e<r;e+=2){(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0}r=0}var h,y,v,m,_=void 0;function b(e,t){var n=this,r=new this.constructor(E);void 0===r[w]&&k(r);var o,i=n._state;return i?(o=arguments[i-1],a(function(){return M(i,r,o,n._result)})):j(n,r,e,t),r}function g(e){if(e&&"object"===_typeof(e)&&e.constructor===this)return e;var t=new this(E);return S(t,e),t}_=c?function(){return process.nextTick(f)}:s?(y=0,v=new s(f),m=document.createTextNode(""),v.observe(m,{characterData:!0}),function(){m.data=y=++y%2}):l?((h=new MessageChannel).port1.onmessage=f,function(){return h.port2.postMessage(0)}):(void 0===e&&"function"==typeof require?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(f)}:p()}catch(e){return p()}}:p)();var w=Math.random().toString(36).substring(2);function E(){}var O=void 0,P=1,R=2;function A(e,r,o){a(function(t){var n=!1,e=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(o,r,function(e){n||(n=!0,(r!==e?S:N)(t,e))},function(e){n||(n=!0,C(t,e))},t._label);!n&&e&&(n=!0,C(t,e))},e)}function x(e,t,n){var r,o;t.constructor===e.constructor&&n===b&&t.constructor.resolve===g?(r=e,(o=t)._state===P?N(r,o._result):o._state===R?C(r,o._result):j(o,void 0,function(e){return S(r,e)},function(e){return C(r,e)})):void 0!==n&&u(n)?A(e,t,n):N(e,t)}function S(t,e){if(t===e)C(t,new TypeError("You cannot resolve a promise with itself"));else if(o=_typeof(r=e),null===r||"object"!==o&&"function"!==o)N(t,e);else{var n=void 0;try{n=e.then}catch(e){return void C(t,e)}x(t,e,n)}var r,o}function T(e){e._onerror&&e._onerror(e._result),I(e)}function N(e,t){e._state===O&&(e._result=t,e._state=P,0!==e._subscribers.length&&a(I,e))}function C(e,t){e._state===O&&(e._state=R,e._result=t,a(T,e))}function j(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+P]=n,o[i+R]=r,0===i&&e._state&&a(I,e)}function I(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?M(n,r,o,i):o(i);e._subscribers.length=0}}function M(e,t,n,r){var o=u(n),i=void 0,a=void 0,s=!0;if(o){try{i=n(r)}catch(e){s=!1,a=e}if(t===i)return void C(t,new TypeError("A promises callback cannot return that same promise."))}else i=r;t._state!==O||(o&&s?S(t,i):!1===s?C(t,a):e===P?N(t,i):e===R&&C(t,i))}var L=0;function k(e){e[w]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}var V=(D.prototype._enumerate=function(e){for(var t=0;this._state===O&&t<e.length;t++)this._eachEntry(e[t],t)},D.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===g){var o,i=void 0,a=void 0,s=!1;try{i=t.then}catch(e){s=!0,a=e}i===b&&t._state!==O?this._settledAt(t._state,e,t._result):"function"!=typeof i?(this._remaining--,this._result[e]=t):n===B?(o=new n(E),s?C(o,a):x(o,t,i),this._willSettleAt(o,e)):this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},D.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===O&&(this._remaining--,e===R?C(r,n):this._result[t]=n),0===this._remaining&&N(r,this._result)},D.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){return n._settledAt(P,t,e)},function(e){return n._settledAt(R,t,e)})},D);function D(e,t){this._instanceConstructor=e,this.promise=new e(E),this.promise[w]||k(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?N(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&N(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}var B=(G.prototype.catch=function(e){return this.then(null,e)},G.prototype.finally=function(t){var n=this.constructor;return u(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},G);function G(e){this[w]=L++,this._result=this._state=void 0,this._subscribers=[],E!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof G?function(t,e){try{e(function(e){S(t,e)},function(e){C(t,e)})}catch(e){C(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return B.prototype.then=b,B.all=function(e){return new V(this,e).promise},B.race=function(o){var i=this;return n(o)?new i(function(e,t){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(e,t)}):new i(function(e,t){return t(new TypeError("You must pass an array to race."))})},B.resolve=g,B.reject=function(e){var t=new this(E);return C(t,e),t},B._setScheduler=function(e){o=e},B._setAsap=function(e){a=e},B._asap=a,B.polyfill=function(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=B},B.Promise=B}),window.Galaxy=window.Galaxy||function(){var c=Object.getPrototypeOf(_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))).constructor;Array.prototype.unique=function(){for(var e=this.concat(),t=0,n=e.length;t<n;++t)for(var r=t+1,o=e.length;r<o;++r)e[t]===e[r]&&e.splice(r--,1);return e};var f={};function e(){this.moduleContents={},this.addOnProviders=[],this.rootElement=null,this.bootModule=null}e.cm=f,e.prototype={extend:function(e){for(var t,n=e||{},r=1;r<arguments.length;r++)if(t=arguments[r])for(var o in t)t.hasOwnProperty(o)&&(t[o]instanceof Array?n[o]=this.extend(n[o]||[],t[o]):"object"===_typeof(t[o])&&null!==t[o]?n[o]=this.extend(n[o]||{},t[o]):n[o]=t[o]);return n},clone:function(e){var t,n=e instanceof Array?[]:{};for(var r in n.__proto__=e.__proto__,e){e.hasOwnProperty(r)&&((t=e[r])instanceof Promise||"object"!==_typeof(t)||null===t||"animations"===r&&t&&"object"===_typeof(t)?n[r]=t:n[r]=Galaxy.clone(t))}return n},boot:function(e){var r=this;if(r.rootElement=e.element,e.id="root",!r.rootElement)throw new Error("element property is mandatory");return new Promise(function(t,n){r.load(e).then(function(e){r.bootModule=e,t(e)}).catch(function(e){console.error("Something went wrong",e),n()})})},convertToURIString:function(e,t){var n,r,o,i=[];for(n in e){e.hasOwnProperty(n)&&(r=t?t+"["+n+"]":n,o=e[n],i.push(null!==o&&"object"===_typeof(o)?this.convertToURIString(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o)))}return i.join("&")},load:function(i){if(!i)throw new Error("Module meta data or constructor is missing");var a=this;return new Promise(function(t,n){if(i.hasOwnProperty("constructor")&&"function"==typeof i.constructor)return i.path=i.id="internal/"+(new Date).valueOf()+"-"+Math.round(performance.now()),i.systemId=i.parentScope?i.parentScope.systemId+"/"+i.id:i.id,a.compileModuleContent(i,i.constructor,[]).then(function(e){return a.executeCompiledModule(e).then(t)});i.id||(i.id=0===i.path.indexOf("/")?i.path.substring(1):i.path),i.systemId=i.parentScope?i.parentScope.systemId+"/"+i.id:i.id;var r=[i.path];if(i.invokers){if(-1!==i.invokers.indexOf(i.path))throw new Error("circular dependencies: \n"+i.invokers.join("\n")+"\nwant to load: "+i.path);(r=i.invokers).push(i.path)}var o=i.path,e=Galaxy.moduleContents[o];e&&!i.fresh||(Galaxy.moduleContents[o]=e=fetch(o).then(function(e){return e.ok?e:(console.error(e.statusText,o),n(e.statusText))}).catch(n)),(e=e.then(function(e){var t=i.contentType||e.headers.get("content-type");return e.clone().text().then(function(e){return new Galaxy.Module.Content(t,e,i)})})).then(function(e){return a.compileModuleContent(i,e,r)}).then(function(e){return a.executeCompiledModule(e)}).then(t).catch(n)})},compileModuleContent:function(c,l,p){var d=this;return new Promise(function(n,e){function o(e,t){t.splice(t.indexOf(e.path)-1,1),0===t.length&&n(e)}"function"==typeof l&&(l=new Galaxy.Module.Content("function",l,c));var i,t=Galaxy.Module.Content.parse(l),r=t.imports,a=t.source,s=new Galaxy.Scope(c,c.element||d.rootElement),u=new Galaxy.Module(c,a,s);r.length?(i=r.slice(0),r.forEach(function(e){var t,n,r=Galaxy.getModuleAddOnProvider(e.path);r?(n=(t=r.handler.call(null,s,u)).create(),u.registerAddOn(e.path,n),u.addOnProviders.push(t),o(u,i)):f[e.path]&&!e.fresh?o(u,i):(0===e.path.indexOf("./")&&(e.path=s.uri.path+e.path.substr(2)),Galaxy.load({name:e.name,path:e.path,fresh:e.fresh,contentType:e.contentType,parentScope:s,invokers:p}).then(function(){o(u,i)}))})):n(u)})},executeCompiledModule:function(u){return new Promise(function(n,t){try{for(var e in u.addOns)u.scope.inject(e,u.addOns[e]);for(var r in f){var o;!f.hasOwnProperty(r)||(o=f[r]).module&&u.scope.inject(o.id,o.module)}var i=u.source,a=("function"==typeof i?i:new c("Scope",["// "+u.id+": "+u.path,i].join("\n"))).call(null,u.scope),s=function(){Reflect.deleteProperty(u,"source"),u.addOnProviders.forEach(function(e){return e.start()}),Reflect.deleteProperty(u,"addOnProviders");var e=u.path;u.scope.export._temp?u.scope.parentScope.inject(e,u.scope.export):f[e]||(f[e]={id:e,module:u.scope.export});var t=u;return t.init(),n(t)};a?a.then(s):s()}catch(e){throw console.error(e.message+": "+u.path),console.warn("Search for es6 features in your code and remove them if your browser does not support them, e.g. arrow function"),console.error(e),t(),new Error(e)}})},getModuleAddOnProvider:function(t){return this.addOnProviders.filter(function(e){return e.name===t})[0]},registerAddOnProvider:function(e,t){if("function"!=typeof t)throw"Addon provider should be a function";this.addOnProviders.push({name:e,handler:t})}};var t=new e;return t.Core=e,t}(),Galaxy.Module=function(){function e(e,t,n){this.id=e.id,this.systemId=e.systemId,this.source=t,this.path=e.path||null,this.importId=e.importId||e.path,this.addOns=e.addOns||{},this.addOnProviders=[],this.scope=n}return e.prototype={init:function(){this.scope.trigger("module.init")},start:function(){this.scope.trigger("module.start")},destroy:function(){this.scope.trigger("module.destroy")},registerAddOn:function(e,t){this.addOns[e]=t}},e}(),Galaxy.Module.Content=function(){var r={};function e(e,t,n){this.type=e,this.content=t,this.metaData=n}return e.parse=function(e){var t=(e.type||"").split(";")[0],n=r[t];return n?n.call(null,e.content,e.metaData):r.default.call(null,e.content,e.metaData)},e.registerParser=function(e,t){r[e]=t},e.prototype={},e}(),Galaxy.Observer=function(){var n=Object.defineProperty;function e(e){this.context=e,this.subjectsActions={},this.allSubjectAction=[];var t="__observers__";this.context.hasOwnProperty(t)||n(e,t,{value:[],writable:!0,configurable:!0}),this.context[t].push(this)}return e.notify=function(e,t,n){var r=e.__observers__;void 0!==r&&r.forEach(function(e){e.notify(t,n)})},e.prototype={remove:function(){var e=this.context.__observers__,t=e.indexOf(this);-1!==t&&e.splice(t,1)},notify:function(t,n){var r=this;r.subjectsActions.hasOwnProperty(t)&&r.subjectsActions[t].call(r.context,n),r.allSubjectAction.forEach(function(e){e.call(r.context,t,n)})},on:function(e,t){this.subjectsActions[e]=t},onAll:function(e){-1===this.allSubjectAction.indexOf(e)&&this.allSubjectAction.push(e)}},e}(),Galaxy.Scope=function(){var o=Object.defineProperty;function e(e,t){var n=this;n.systemId=e.systemId,n.parentScope=e.parentScope||null,n.element=t||null,n.export={},n.uri=new Galaxy.GalaxyURI(e.path),n.eventHandlers={},n.observers=[];var r=n.element.data?Galaxy.View.bindSubjectsToData(n.element,n.element.data,n.parentScope,!0):{};o(n,"data",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Object.assign(r,e)}}),o(n,"__imports__",{value:{},writable:!1,enumerable:!1,configurable:!1}),n.on("module.destroy",this.destroy.bind(n))}return e.prototype={inject:function(e,t){this.__imports__[e]=t},import:function(e){return 0===e.indexOf("./")&&(e=e.replace("./",this.uri.path)),this.__imports__[e]},destroy:function(){this.data=null,this.observers.forEach(function(e){e.remove()})},kill:function(){throw Error("Scope.kill() should not be invoked at the runtime")},load:function(e,t){var n=Object.assign({},e,t||{});return 0===n.path.indexOf("./")&&(n.path=this.uri.path+e.path.substr(2)),n.parentScope=this,Galaxy.load(n)},loadModuleInto:function(e,t){return this.load(e,{element:t}).then(function(e){return e.start(),e})},on:function(e,t){this.eventHandlers[e]||(this.eventHandlers[e]=[]),-1===this.eventHandlers[e].indexOf(t)&&this.eventHandlers[e].push(t)},trigger:function(e,t){this.eventHandlers[e]&&this.eventHandlers[e].forEach(function(e){e.call(null,t)})},observe:function(e){var t=new Galaxy.Observer(e);return this.observers.push(t),t}},e}(),Galaxy.GalaxyURI=function(e){var t=document.createElement("a");t.href=e;var n=/([^\t\n]+)\//g.exec(t.pathname);this.parsedURL=t.href,this.path=n?n[0]:"/",this.base=window.location.pathname,this.protocol=t.protocol},function(){Galaxy.Module.Content.registerParser("text/css",function(d){return{imports:[],source:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(o){var i,a,s,u,c,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e){if(f.hasOwnProperty(e))return f[e];var t=Object.keys(f).length,n={host:"gjs-host-"+t,content:"gjs-content-"+t};return f[e]=n}(o.systemId),t=d,r=n=void 0,n=document.implementation.createHTMLDocument(""),(r=document.createElement("style")).textContent=t,n.body.appendChild(r),a="["+i.host+"]",s=[],u=/(:host)/g,c=/([^\s+>~,]+)/g,l=function(e){return e},Array.prototype.forEach.call(r.sheet.cssRules,function(e){var t=e.selectorText.replace(c,l);e.selectorText=t.replace(u,a),s.push(e.cssText)}),p=s.join("\n"),o.export={_temp:!0,tag:"style",type:"text/css",id:o.systemId,text:p,_create:function(){var e=this.parent;e.node.setAttribute(i.host,""),function t(e,n){e instanceof Array||null==e||(e=[e]);e.forEach(function(e){"comment"!==e.tag&&(e[n.content]="",e.children&&t(e.children,n))})}(e.blueprint.children||[],i)}};case 10:case"end":return e.stop()}var t,n,r},e)}));return function(e){return t.apply(this,arguments)}}()}});var f={}}(),Galaxy.Module.Content.registerParser("default",function(n){return{imports:[],source:function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.export=n;case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}}),Galaxy.Module.Content.registerParser("function",function(e,t){var n=[],r=t.imports?t.imports.slice(0):[];return{imports:r=r.map(function(e){return-1!==n.indexOf(e)?null:(n.push(e),{path:e})}).filter(Boolean),source:e}}),Galaxy.Module.Content.registerParser("application/javascript",function(e){var o=[],i=[],t=e.replace(/^\/\/.*$/gm,"").replace(/Scope\.import\(['"](.*)['"]\)/gm,function(e,t){var n=t.match(/([\S]+)/gm),r=n[n.length-1];return-1!==i.indexOf(r)||(i.push(r),o.push({path:r,fresh:0===n.indexOf("new"),contentType:null})),"Scope.import('"+r+"')"});return t=(t=t.replace(/Scope\.importAsText\(['"](.*)['"]\)/gm,function(e,t){var n=t.match(/([\S]+)/gm),r=n[n.length-1]+"#text";return-1!==i.indexOf(r)||(i.push(r),o.push({path:r,fresh:!0,contentType:"text/plain"})),"Scope.import('"+r+"')"})).replace(/Scope\.kill\(.*\)/gm,"return"),{imports:o,source:t}}),Galaxy.View=function(v){var m=Object.defineProperty,_=Object.keys,e=Array.prototype.concat.bind([]),i=["text","comment","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","plaintext","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function o(e,t){if("object"===_typeof(t)&&null!==t){var n={};for(var r in t){var o=t[r];"object"===_typeof(o)?n[r]=JSON.stringify(o):n[r]=o}Object.assign(e.dataset,n)}else e.dataset=null}function s(e,t){var n=(t=t.split("."))[0],r=e,o=e,i=e;if(void 0===e[n]){for(;i.__parent__;){if(i.__parent__.hasOwnProperty(n)){o=i.__parent__;break}i=i.__parent__}void 0===o[n]&&(o=r)}o=o||{};var a=t.length-1;return t.forEach(function(e,t){o=o[e],t===a||o instanceof Object||(o={})}),o instanceof v.View.ArrayChange?o.getInstance():void 0===o?null:o}Array.prototype.createDataMap=function(e,t){for(var n={},r=0,o=this.length;r<o;r++){var i=this[r];n[i[e]]=i[t]}return n},S.EMPTY_CALL=function(){},S.GET_MAX_INDEX=function(){return"@"+performance.now()},S.BINDING_SYNTAX_REGEX=new RegExp("^<([^\\[\\]<>]*)>\\s*([^\\[\\]<>]*)\\s*$|^=\\s*([^\\[\\]<>]*)\\s*$"),S.REACTIVE_BEHAVIORS={data:!0},S.COMPONENTS={},S.NODE_BLUEPRINT_PROPERTY_MAP={tag:{type:"none"},props:{type:"none"},children:{type:"none"},data_3:{type:"none",key:"data"},data_8:{type:"none",key:"data"},html:{type:"prop",key:"innerHTML"},data:{type:"reactive",key:"data",getConfig:function(e,t){if(null!==t&&("object"!==_typeof(t)||t instanceof Array))throw new Error("data property should be an object with explicits keys:\n"+JSON.stringify(this.blueprint,null,"  "));return{reactiveData:null,subjects:t,scope:e}},install:function(n){if(n.scope.data===n.subjects)throw new Error("It is not allowed to use Scope.data as data value");if(this.blueprint.module)return Object.assign(this.data,n.subjects),!1;var r=this.node;return n.reactiveData=v.View.bindSubjectsToData(this,n.subjects,n.scope,!0),void new v.Observer(n.reactiveData).onAll(function(e,t){o(r,n.reactiveData)})},update:function(e,t,n){n&&(t=n()),e.subjects===t&&(t=e.reactiveData),o(this.node,t)}},onchange:{type:"event"},onclick:{type:"event"},ondblclick:{type:"event"},onmouseover:{type:"event"},onmouseout:{type:"event"},onkeydown:{type:"event"},onkeypress:{type:"event"},onkeyup:{type:"event"},onmousedown:{type:"event"},onmouseup:{type:"event"},onload:{type:"event"},onabort:{type:"event"},onerror:{type:"event"},onfocus:{type:"event"},onblur:{type:"event"},onreset:{type:"event"},onsubmit:{type:"event"}},S.PROPERTY_SETTERS={none:function(){return S.EMPTY_CALL}};function r(){if(this.length){var e=this.shift(),t=u[e];if(!t.length)return y.call(this);(function e(t,n){if(n)return t();this.length?this.shift()(e.bind(this,t)):t()}).call(t,y.bind(this),d)}else p=!0,f=h=0}var a,t,u=S.DOM_MANIPLATION={},n=[],c=[],l=[],p=!0,d=!1,f=0,h=0,y=function e(){var t=this;if(d)return d=!1,f=0,e.call(l);var n=performance.now();f+=n-(h=h||n),h=n,3<f?(f=0,a&&(clearTimeout(a),a=null),a=setTimeout(function(e){h=e,r.call(t)})):r.call(this)};function b(e,t){return t<e}function g(e,t){return e<t}function w(e,t,n){for(var r=0,o=e.length-1,i=0;r<=o;){var a=Math.floor((r+o)/2);n(t,e[a])?i=r=a+1:o=(i=a)-1}return i}function E(e,t){return t<e[0]?0:t>e[e.length-1]?e.length:w(e,t,b)}function O(e,t){return t>e[0]?0:t<e[e.length-1]?e.length:w(e,t,g)}function P(e,t,n,r){u.hasOwnProperty(e)?u[e].push(t):(u[e]=[t],n.splice(r(n,e),0,e))}function R(){t&&(clearTimeout(t),t=null),l=e(c,n),t=setTimeout(function(){p&&(p=!1,y.call(l))})}S.DESTROY_IN_NEXT_FRAME=function(e,t){d=!0,P("<"+e,t,c,O),R()},S.CREATE_IN_NEXT_FRAME=function(e,t){d=!0,P(">"+e,t,n,E),R()},S.DESTROY_NODES=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].destroy(t)},S.setAttr=function(e,t,n){null!=t&&!1!==t?e.node.setAttribute(n,!0===t?"":t):e.node.removeAttribute(n)},S.setProp=function(e,t,n){e.node[n]=t},S.createChildScope=function(e){var t={};return m(t,"__parent__",{enumerable:!1,value:e}),m(t,"__scope__",{enumerable:!1,value:e.__scope__||e}),t};var A=/=\s*'<>(.*)'|=\s*"<>(.*)"/m,x=/^\(\s*([^)]+?)\s*\)|^function.*\(\s*([^)]+?)\s*\)/m;function S(e){var t=this;(t.scope=e).element instanceof v.View.ViewNode?(t.container=e.element,t._components=Object.assign({},e.element.view._components)):(t.container=new v.View.ViewNode({tag:e.element},null,t),t.container.setInDOM(!0))}return S.getBindings=function(e){var t,n=null,r=[],o=[],i=!1,a=_typeof(e),s=null;return"string"===a?e.match(S.BINDING_SYNTAX_REGEX)&&(n=[e]):"function"===a?(t=e.toString().match(x))&&(n=(o=(t[1]||t[2]).split(",").map(function(e){var t=e.match(A);return t?"<>"+(t[1]||t[2]):void 0})).slice(),s=e,i=!0):n=null,n&&(r=n.filter(function(e){return"string"==typeof e&&0===e.indexOf("<>")})),{propertyKeys:r?r.map(function(e){return e.replace(/<>/g,"")}):null,propertyValues:o,handler:s,isExpression:i,expressionFn:null}},S.propertyLookup=function(e,t){var n,r=(t=t.split("."))[0],o=e,i=e,a=e,s=0;if(void 0===e[r]){for(;a.__parent__;){if((n=a.__parent__).hasOwnProperty(r)){i=n;break}if(1e3<=s++)throw Error("Maximum nested property lookup has reached `"+r+"`\n"+e);a=n}if(void 0===i[r])return o}return i},S.propertyRDLookup=function(e,t){var n=t.split("."),r=n.length-1,o=e;return n.forEach(function(t,e){o=S.propertyLookup(o,t),e!==r&&(o=o[t]?o[t]:o.__rd__.refs.filter(function(e){return e.shadow[t]})[0].shadow[t].data)}),o.__rd__},S.EXPRESSION_ARGS_FUNC_CACHE={},S.createArgumentsProviderFn=function(e){var t=e.join();if(S.EXPRESSION_ARGS_FUNC_CACHE[t])return S.EXPRESSION_ARGS_FUNC_CACHE[t];for(var n="return [",r=[],o=0,i=e.length;o<i;o++){var a=e[o];"string"==typeof a?0===a.indexOf("<>this.")?r.push('_prop(this.data, "'+a.replace("<>this.","")+'")'):0===a.indexOf("<>")&&r.push('_prop(scope, "'+a.replace(/<>/g,"")+'")'):r.push("_var["+o+"]")}n+=r.join(",")+"]";var s=new Function("scope, _prop , _var",n);return S.EXPRESSION_ARGS_FUNC_CACHE[t]=s},S.createExpressionFunction=function(t,n,r,o,i){i[0]||(t instanceof v.View.ViewNode?i[0]=t.data:i[0]=n);var a=v.View.createArgumentsProviderFn(i);return function(){var e=[];try{e=a.call(t,n,s,i)}catch(e){console.error("Can't find the property: \n"+o.join("\n"),"\n\nIt is recommended to inject the parent object instead of its property.\n\n",n,"\n",e)}return r.apply(t,e)}},S.getExpressionFn=function(t,e,n){if(!t.isExpression)return!1;if(t.expressionFn)return t.expressionFn;try{return t.expressionFn=v.View.createExpressionFunction(e,n,t.handler,t.propertyKeys,t.propertyValues),t.expressionFn}catch(e){throw Error(e.message+"\n",t.propertyKeys)}},S.makeBinding=function(e,t,n,r,o,i){for(var a=o.propertyKeys,s=S.getExpressionFn(o,i,r),u=r,c=null,l=null,p=null,d=[],f=0,h=a.length;f<h;f++){l=null,1<(d=(c=a[f]).split(".")).length&&(c=d[0],l=d.slice(1).join(".")),!n&&r&&(n="__rd__"in r?r.__rd__:new v.View.ReactiveData(null,r,r instanceof Galaxy.Scope?r.systemId:"child")),"data"===d[0]&&r&&r.hasOwnProperty("__scope__")&&"data"===c&&(n=null),null!==(p=u="this"===d[0]&&"this"===c&&i instanceof v.View.ViewNode?(c=d[1],o.propertyKeys=d.slice(2),l=null,n=new v.View.ReactiveData("data",i.data,"this"),S.propertyLookup(i.data,c)):u&&S.propertyLookup(u,c))&&"object"===_typeof(u)&&(p=u[c]);var y=void 0;if(p instanceof Object?y=new v.View.ReactiveData(c,p,n||r.__scope__.__rd__):l?y=new v.View.ReactiveData(c,null,n):n&&n.addKeyToShadow(c,"repeat"===t),null===l){if(e instanceof v.View.ViewNode||m(e,t,{set:function(e){s||n.data[c]!==e&&(n.data[c]=e)},get:function(){return s?s():n.data[c]},enumerable:!0,configurable:!0}),n&&r instanceof v.Scope&&e instanceof v.View.ViewNode&&e.localPropertyNames.has(c))return;n.addNode(e,t,c,s)}null!==l&&S.makeBinding(e,t,y,p,Object.assign({},o,{propertyKeys:[l]}),i)}},S.bindSubjectsToData=function(n,e,r,t){var o,i,a,s=_(e),u=t?v.clone(e):e;r instanceof v.Scope||(a=new v.View.ReactiveData(null,r,"BSTD"));for(var c=0,l=s.length;c<l;c++){o=s[c],i=u[o];var p=S.getBindings(i);p.propertyKeys.length&&(S.makeBinding(u,o,a,r,p,n),n&&p.propertyKeys.forEach(function(t){try{var e=S.propertyRDLookup(r,t);n.finalize.push(function(){e.removeNode(u)})}catch(e){console.error("bindSubjectsToData -> Could not find: "+t+"\n in",r,e)}})),!i||"object"!==_typeof(i)||i instanceof Array||S.bindSubjectsToData(n,i,r)}return u},S.installPropertyForNode=function(e,t,n,r){if(e in S.REACTIVE_BEHAVIORS){var o=S.NODE_BLUEPRINT_PROPERTY_MAP[e],i=o.getConfig.call(t,r,t.blueprint[n]);return void 0!==i&&(t.cache[n]=i),o.install.call(t,i)}return!0},S.activatePropertyForNode=function(e,t,n,r){var o=S.NODE_BLUEPRINT_PROPERTY_MAP[t]||{type:"attr"};o.key=o.key||t,void 0!==o.beforeActivate&&o.beforeActivate(e,n,t,r),e.setters[t]=S.getPropertySetterForNode(o,e,n,r)},S.getPropertySetterForNode=function(e,t,n,r){return"reactive"!==e.type&&t.virtual?S.EMPTY_CALL:void 0!==e.getSetter?e.getSetter(t,e,e,r):S.PROPERTY_SETTERS[e.type](t,e,r)},S.setPropertyForNode=function(t,e,n){var r=e+"_"+t.node.nodeType,o=S.NODE_BLUEPRINT_PROPERTY_MAP[r]||S.NODE_BLUEPRINT_PROPERTY_MAP[e];switch(o||(o={type:"prop"},!(e in t.node)&&"setAttribute"in t.node&&(o={type:"attr"}),S.NODE_BLUEPRINT_PROPERTY_MAP[r]=o),o.key=o.key||e,o.type){case"attr":case"prop":case"reactive":S.getPropertySetterForNode(o,t)(n,null);break;case"event":t.node[e]=function(e){n.call(t,e,t.data)}}},S.prototype={_components:{},components:function(e){for(var t in e){var n=e[t];if("function"!=typeof n)throw new Error("Component must be type of function: "+t);this._components[t]=n}},getComponent:function(e,t,n){var r=n,o=t;if(e)if(e in this._components){if(t.props&&"object"!==_typeof(t.props))throw new Error("The `props` must be a literal object.");if(r=S.createChildScope(n),Object.assign(r,t.props||{}),S.bindSubjectsToData(null,r,n),o=this._components[e].call(null,r,t,this),t instanceof Array)throw new Error("A component's blueprint can NOT be an array. A component must have only one root node.")}else-1===i.indexOf(e)&&console.warn("Invalid component/tag: "+e);return{blueprint:Object.assign(t,o),scopeData:r}},enterKeyframe:function(e,t,n){var r=void 0,o=n||.01;return"number"==typeof t?(o=t,t=null):"string"==typeof t&&(r=n,o=.01),{tag:"comment",text:"keyframe:enter",animations:{enter:{duration:o,timeline:t,position:r,onComplete:e}}}},leaveKeyframe:function(e,t,n){return{tag:"comment",text:"keyframe:leave",animations:{enter:{duration:void 0!==n?n:.01,timeline:t,onComplete:e}}}},blueprint:function(e){return this.createNode(e,this.scope,this.container,null)},clean:function(e){this.container.clean(e)},dispatchEvent:function(e){this.container.dispatchEvent(e)},createNode:function(e,t,n,r){var o=0,i=0;if("string"==typeof e){var a=document.createElement("div");a.innerHTML=e;var s=Array.prototype.slice.call(a.childNodes);return s.forEach(function(e){n.node.appendChild(e)}),s}if("function"==typeof e)return e();if(e instanceof Array){for(var u=[],o=0,i=e.length;o<i;o++)u.push(this.createNode(e[o],t,n,null));return u}if(e instanceof Object){var c,l,p=this.getComponent(e.tag,e,t),d=_(p.blueprint),f=[],h=new v.View.ViewNode(p.blueprint,n,this,p.scopeData);for(n.registerChild(h,r),o=0,i=d.length;o<i;o++){var y=d[o];!1!==S.installPropertyForNode(y,h,y,p.scopeData)&&f.push(y)}for(o=0,i=f.length;o<i;o++){"children"!==(y=f[o])&&(c=p.blueprint[y],(l=S.getBindings(c)).propertyKeys.length?S.makeBinding(h,y,null,p.scopeData,l,h):S.setPropertyForNode(h,y,c))}return h.virtual||(h.setInDOM(!0),p.blueprint.children&&this.createNode(p.blueprint.children,p.scopeData,h,null)),h}throw Error("blueprint can not be null")}},S}(Galaxy),Galaxy.View.ArrayChange=function(t){var e=0;function n(){this.id=e++,1e8<e&&(e=0),this.init=null,this.original=null,this.returnValue=null,this.params=[],this.type="reset",Object.preventExtensions(this)}return n.prototype={getInstance:function(){var e=new t.View.ArrayChange;return e.init=this.init,e.original=this.original,e.params=this.params.slice(0),e.type=this.type,e}},n}(Galaxy),Galaxy.View.ReactiveData=function(f){var r=Array.prototype,o=["push","pop","shift","unshift","splice","sort","reverse"],i=Object.keys,h=Object.defineProperty,a=function(e){return{id:e||"Scope",shadow:{},data:{},notify:function(){},notifyDown:function(){},sync:function(){},makeReactiveObject:function(){},addKeyToShadow:function(){}}};function y(e,t,n){var r=n instanceof y?n:a(n);if(this.data=t,this.id=r.id+(e?"."+e:"|Scope"),this.keyInParent=e,this.nodesMap={},this.parent=r,this.refs=[],this.shadow={},this.nodeCount=-1,this.data&&this.data.hasOwnProperty("__rd__")){this.refs=this.data.__rd__.refs;var o=this.getRefById(this.id);if(o)return o.parent.isDead&&(o.parent=r),this.fixHierarchy(e,o),o;this.refs.push(this)}else{if(this.refs.push(this),null===this.data){if(this.parent.shadow[e])return this.parent.shadow[e];this.data={},this.parent.data[e]?new y(e,this.parent.data[e],this.parent):this.parent.makeReactiveObject(this.parent.data,e,!0)}if(!Object.isExtensible(this.data))return;h(this.data,"__rd__",{enumerable:!1,configurable:!0,value:this}),(this.data instanceof Galaxy.Scope||this.data.__scope__)&&(this.addKeyToShadow=f.View.EMPTY_CALL),this.data instanceof Galaxy.Scope?this.walkOnScope(this.data):this.walk(this.data)}this.fixHierarchy(e,this)}return y.prototype={get isDead(){return 0===this.nodeCount&&1===this.refs.length&&this.refs[0]===this},fixHierarchy:function(e,t){this.parent.data instanceof Array?this.keyInParent=this.parent.keyInParent:this.parent.shadow[e]=t},setData:function(e){if(this.removeMyRef(),e instanceof Object)(this.data=e).hasOwnProperty("__rd__")?(this.data.__rd__.addRef(this),this.refs=this.data.__rd__.refs,this.data instanceof Array?(this.sync("length",this.data.length),this.sync("changes",this.data.changes)):this.syncAll()):(h(this.data,"__rd__",{enumerable:!1,configurable:!0,value:this}),this.walk(this.data)),this.setupShadowProperties(function(e){if(e instanceof Array){var t=["length"];return e.hasOwnProperty("changes")&&t.push("changes"),t}return Object.keys(e)}(this.data));else for(var t in this.data={},this.shadow)this.shadow[t]instanceof y?this.shadow[t].setData(e):this.notifyDown(t)},walk:function(e){if(!(e instanceof Node))if(e instanceof Array)this.makeReactiveArray(e);else if(e instanceof Object)for(var t in e)this.makeReactiveObject(e,t)},walkOnScope:function(){},makeReactiveObject:function(i,a,e){var t,n,s,u=i[a];"function"!=typeof u&&(t=Object.getOwnPropertyDescriptor(i,a),n=t&&t.get,s=t&&t.set,h(i,a,{get:function(){return n?n.call(i):u},set:function(e){var t=i.__rd__;if(s&&s.call(i,e),u!==e){u=e;for(var n=0,r=t.refs.length;n<r;n++){var o=t.refs[n];o.shadow[a]&&(o.makeKeyEnum(a),o.shadow[a].setData(e))}t.notify(a,u)}else e instanceof Array?t.sync(a,e):e instanceof Object&&t.notifyDown(a)},enumerable:!e,configurable:!0}),this.shadow[a]?this.shadow[a].setData(u):this.shadow[a]=null,this.sync(a,u))},makeReactiveArray:function(p){if(p.hasOwnProperty("changes"))return p.changes.init;var d=new f.View.ArrayChange;d.original=p,d.type="reset",d.params=p;for(var e=0,t=d.params.length;e<t;e++){var n=d.params[e];null!==n&&"object"===_typeof(n)&&new y(d.original.indexOf(n),n,this)}return this.sync("length",p.length),d.init=d,h(p,"changes",{enumerable:!1,configurable:!0,value:d}),o.forEach(function(c){var l=r[c];h(p,c,{value:function(){for(var t=this.__rd__,e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];var r=l.apply(this,n),o=new f.View.ArrayChange,i=o.original=p;switch(o.type=c,o.params=n,o.returnValue=r,o.init=d,c){case"push":case"reset":case"unshift":for(var a=0,s=o.params.length;a<s;a++){var u=o.params[a];null!==u&&"object"===_typeof(u)&&new y(i.indexOf(u),u,t)}break;case"pop":case"shift":null!==r&&"object"===_typeof(r)&&"__rd__"in r&&r.__rd__.removeMyRef();break;case"splice":o.params.slice(2).forEach(function(e){null!==e&&"object"===_typeof(e)&&new y(i.indexOf(e),e,t)})}return h(p,"changes",{enumerable:!1,configurable:!0,value:o}),t.notifyDown("length"),t.notifyDown("changes"),t.notify(t.keyInParent,this),r},writable:!1,configurable:!0})}),d},notify:function(e,t,n){if(this.refs!==n){for(var r=0,o=this.refs.length;r<o;r++){var i=this.refs[r];this!==i&&i.notify(e,t,this.refs)}this.sync(e,t);for(var a=0,s=this.refs.length;a<s;a++){var u=this.refs[a],c=u.keyInParent,l=u.parent;u.parent.notify(c,l.data[c])}}else this.sync(e,t)},notifyDown:function(e){for(var t=this.data[e],n=0,r=this.refs.length;n<r;n++){var o=this.refs[n];this!==o&&o.notify(e,t,this.refs)}this.sync(e,this.data[e])},sync:function(e,t){var n=this.nodesMap[e];if(f.Observer.notify(this.data,e,t),n)for(var r=0,o=n.nodes.length;r<o;r++){var i=n.nodes[r],a=n.keys[r];this.syncNode(i,a,t)}},syncAll:function(){for(var e=i(this.data),t=0,n=e.length;t<n;t++)this.sync(e[t],this.data[e[t]])},syncNode:function(e,t,n){n instanceof f.View.ArrayChange&&(n=n.getInstance()),e instanceof f.View.ViewNode?e.setters[t](n):e[t]=n,f.Observer.notify(e,t,n)},addRef:function(e){-1===this.refs.indexOf(e)&&this.refs.push(e)},removeRef:function(e){var t=this.refs.indexOf(e);-1!==t&&this.refs.splice(t,1)},removeMyRef:function(){var e;this.data&&this.data.hasOwnProperty("__rd__")&&(this.data.__rd__!==this?(this.refs=[this],this.data.__rd__.removeRef(this)):1===this.refs.length||(this.data.__rd__.removeRef(this),e=this.refs[0],h(this.data,"__rd__",{enumerable:!1,configurable:!0,value:e}),this.refs=[this]))},getRefById:function(t){return this.refs.filter(function(e){return e.id===t})[0]},addNode:function(e,t,n,r){var o=(o=this.nodesMap[n])||(this.nodesMap[n]={keys:[],nodes:[]});-1===this.nodeCount&&(this.nodeCount=0);var i,a=o.nodes.indexOf(e);-1!==a&&o.keys[a]===t||(this.nodeCount++,e instanceof f.View.ViewNode&&!e.setters[t]&&e.registerActiveProperty(t,this,r),o.keys.push(t),o.nodes.push(e),(i=this.data[n])instanceof Array&&i.changes&&h(i,"changes",{enumerable:!1,configurable:!0,value:i.changes.init}),this.data instanceof Array&&"length"!==n&&i&&(i=i.init),this.syncNode(e,t,i))},removeNode:function(e){for(var t=0,n=this.refs.length;t<n;t++)this.removeNodeFromRef(this.refs[t],e)},removeNodeFromRef:function(e,t){var n;for(var r in e.nodesMap){n=e.nodesMap[r];for(var o;-1!==(o=n.nodes.indexOf(t));)n.nodes.splice(o,1),n.keys.splice(o,1),this.nodeCount--}},addKeyToShadow:function(e,t){this.shadow[e]||(this.shadow[e]=t?new y(e,[],this):null),this.data.hasOwnProperty(e)||this.makeReactiveObject(this.data,e,!1)},setupShadowProperties:function(e){for(var t in this.shadow)this.shadow[t]instanceof y?(this.data.hasOwnProperty(t)||this.makeReactiveObject(this.data,t,!0),this.shadow[t].setData(this.data[t])):-1===e.indexOf(t)&&this.sync(t)},makeKeyEnum:function(e){var t=Object.getOwnPropertyDescriptor(this.data,e);t&&!1===t.enumerable&&(t.enumerable=!0,h(this.data,e,t))}},y}(Galaxy),Galaxy.View.ViewNode=function(e){var o=e.View,c=document.createComment(""),l=Object.defineProperty,i=Galaxy.View.EMPTY_CALL,a=e.View.CREATE_IN_NEXT_FRAME,s=e.View.DESTROY_IN_NEXT_FRAME;function u(e,t,n){e.insertBefore(t,n)}function p(e,t){e.removeChild(t)}var d={value:this,configurable:!1,enumerable:!1},f={value:null,configurable:!1,enumerable:!1},h=(Array.prototype.indexOf,Array.prototype.slice);function y(e,t,n,r){var o,i,a,s,u=this;u.view=n,e.tag instanceof Node?u.node=e.tag:u.node=(o=e.tag||"div",i=t,"svg"===o||i&&"svg"===i.blueprint.tag?document.createElementNS("http://www.w3.org/2000/svg",o):"comment"===o?document.createComment("ViewNode"):document.createElement(o)),u.blueprint=e,u.data=r instanceof Galaxy.Scope?{}:r,u.localPropertyNames=new Set,u.inputs={},u.virtual=!1,u.visible=!0,u.placeholder=(a=e.tag||"div",(s=c.cloneNode()).textContent=a,s),u.properties=new Set,u.inDOM=!1,u.setters={},u.parent=t,u.finalize=[],u.origin=!1,u.destroyOrigin=0,u.transitory=!1,u.garbage=[],u.leaveWithParent=!1,u.onLeaveComplete=y.REMOVE_SELF.bind(u,!0);l(u,"cache",{enumerable:!1,configurable:!1,value:{}}),u.rendered=new Promise(function(e){u.node.style?u.hasBeenRendered=function(){u.rendered.resolved=!0,u.node.style.removeProperty("display"),u.blueprint._render&&u.blueprint._render.call(u,u.data),e()}:u.hasBeenRendered=function(){u.rendered.resolved=!0,e()}}),u.rendered.resolved=!1,u.destroyed=new Promise(function(e){u.hasBeenDestroyed=function(){u.destroyed.resolved=!0,u.blueprint._destroy&&u.blueprint._destroy.call(u,u.data),e()}}),u.destroyed.resolved=!1,u.blueprint.renderConfig=Object.assign({},y.GLOBAL_RENDER_CONFIG,e.renderConfig||{}),f.value=this.node,l(u.blueprint,"node",f),d.value=this,u.node.__vn__||(l(u.node,"__vn__",d),l(u.placeholder,"__vn__",d)),u.blueprint._create&&u.blueprint._create.call(u,u.data)}return o.NODE_BLUEPRINT_PROPERTY_MAP.node={type:"attr"},o.NODE_BLUEPRINT_PROPERTY_MAP._create={type:"prop",key:"_create",getSetter:function(){return i}},o.NODE_BLUEPRINT_PROPERTY_MAP._render={type:"prop",key:"_render",getSetter:function(){return i}},o.NODE_BLUEPRINT_PROPERTY_MAP._destroy={type:"prop",key:"_destroy",getSetter:function(){return i}},o.NODE_BLUEPRINT_PROPERTY_MAP.renderConfig={type:"prop",key:"renderConfig"},y.GLOBAL_RENDER_CONFIG={applyClassListAfterRender:!1,renderDetached:!1},y.cleanReferenceNode=function(e){e instanceof Array?e.forEach(function(e){y.cleanReferenceNode(e)}):e instanceof Object&&(f.value=null,l(e,"node",f),y.cleanReferenceNode(e.children))},y.createIndex=function(e){if(e<0)return"0";if(e<10)return e+"";for(var t="9",n=e-10;10<=n;)t+="9",n-=10;return t+n},y.REMOVE_SELF=function(e){var t=this;e?(t.node.parentNode&&p(t.node.parentNode,t.node),t.placeholder.parentNode&&p(t.placeholder.parentNode,t.placeholder),t.garbage.forEach(function(e){y.REMOVE_SELF.call(e,!0)}),t.hasBeenDestroyed()):(t.placeholder.parentNode||u(t.node.parentNode,t.placeholder,t.node),t.node.parentNode&&p(t.node.parentNode,t.node),t.garbage.forEach(function(e){y.REMOVE_SELF.call(e,!0)})),t.garbage=[]},y.prototype={onLeaveComplete:null,dump:function(){for(var e=this.parent,t=this.garbage;e.transitory&&(e.blueprint.hasOwnProperty("if")&&!this.blueprint.hasOwnProperty("if")&&(t=e.garbage),e.parent&&e.parent.transitory);)e=e.parent;t.push(this),this.garbage=[]},query:function(e){return this.node.querySelector(e)},dispatchEvent:function(e){this.node.dispatchEvent(e)},cloneBlueprint:function(){var e=Object.assign({},this.blueprint);return y.cleanReferenceNode(e),l(e,"mother",{value:this.blueprint,writable:!1,enumerable:!1,configurable:!1}),e},virtualize:function(){this.placeholder.nodeValue=JSON.stringify(this.blueprint,function(e,t){return"children"===e?"<children>":"animations"===e?"<animations>":t},2),this.virtual=!0,this.setInDOM(!1)},populateEnterSequence:function(){this.node.style.display=null},populateLeaveSequence:i,populateHideSequence:function(){this.node.style.display="none"},setInDOM:function(e){var t,n,r=this;if(r.blueprint.renderConfig.renderDetached)return r.blueprint.renderConfig.renderDetached=!1,void a(r.index,function(e){r.hasBeenRendered(),e()});r.inDOM=e,r.virtual||(e?(r.node.style&&r.node.style.setProperty("display","none"),r.node.parentNode||u(r.placeholder.parentNode,r.node,r.placeholder.nextSibling),r.placeholder.parentNode&&p(r.placeholder.parentNode,r.placeholder),a(r.index,function(e){r.hasBeenRendered(),r.populateEnterSequence(),e()})):!e&&r.node.parentNode&&(r.origin=!0,r.transitory=!0,t=r.populateLeaveSequence,n=r.getChildNodes(),r.prepareLeaveSequence(r.hasAnimation(n),n),s(r.index,function(e){r.populateLeaveSequence(y.REMOVE_SELF.bind(r,!1)),r.origin=!1,r.transitory=!1,r.populateLeaveSequence=t,e()})))},setVisibility:function(e){var t=this;(t.visible=e)&&!t.virtual?a(t.index,function(e){t.node.style.display=null,t.populateEnterSequence(),e()}):!e&&t.node.parentNode&&(t.origin=!0,t.transitory=!0,s(t.index,function(e){t.populateHideSequence(),t.origin=!1,t.transitory=!1,e()}))},registerChild:function(e,t){this.node.insertBefore(e.placeholder,t)},createNode:function(e,t){this.view.createNode(e,t,this)},registerActiveProperty:function(e,t,n){this.properties.add(t),o.activatePropertyForNode(this,e,t,n)},snapshot:function(){var e=this.node.getBoundingClientRect(),t=this.node.cloneNode(!0),n={margin:"0",width:e.width+"px",height:e.height+" px",top:e.top+"px",left:e.left+"px",position:"fixed"};return Object.assign(t.style,n),{tag:t,style:n}},hasAnimation:function(e){if(this.populateLeaveSequence&&this.populateLeaveSequence!==i)return!0;for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.hasAnimation(r.getChildNodes()))return!0}return!1},prepareLeaveSequence:function(e,t){var n=this;if(e){if(n.populateLeaveSequence===i&&n.origin)n.populateLeaveSequence=function(){y.REMOVE_SELF.call(n,!1)};else if(n.populateLeaveSequence!==i&&!n.origin)for(var r=0,o=t.length;r<o;r++)t[r].onLeaveComplete=i}else n.populateLeaveSequence=function(){y.REMOVE_SELF.call(n,!n.origin)}},destroy:function(e){var t,n=this;n.transitory=!0,0===n.parent.destroyOrigin?n.destroyOrigin=1:n.destroyOrigin=2,n.inDOM&&(t=n.getChildNodes(),e=e||n.hasAnimation(t),n.prepareLeaveSequence(e,t),n.clean(e,t)),n.properties.forEach(function(e){return e.removeNode(n)});for(var r=n.finalize.length,o=0;o<r;o++)n.finalize[o].call(n);s(n.index,function(e){n.populateLeaveSequence(2===n.destroyOrigin?i:n.onLeaveComplete),n.localPropertyNames.clear(),n.properties.clear(),n.finalize=[],n.inDOM=!1,n.blueprint.node=void 0,n.inputs={},n.view=null,n.parent=null,e()})},getChildNodes:function(){for(var e=[],t=h.call(this.node.childNodes,0),n=t.length-1;0<=n;n--){var r=t[n];"__vn__"in r&&e.push(r.__vn__)}return e},clean:function(e,t){var r=this;t=t||this.getChildNodes(),o.DESTROY_NODES(t,e),s(this.index,function(e){for(var t=r.finalize.length,n=0;n<t;n++)r.finalize[n].call(r);r.finalize=[],e()})},createNext:function(e){a(this.index,e)},get index(){var e=this.parent;if(e){var t=this.placeholder.parentNode?this.placeholder.previousSibling:this.node.previousSibling;if(t){if(!t.hasOwnProperty("__index__")){for(var n=0,r=this.node;null!==(r=r.previousSibling);)++n;t.__index__=n}this.node.__index__=t.__index__+1}else this.node.__index__=0;return e.index+","+y.createIndex(this.node.__index__)}return"0"},get anchor(){return this.inDOM?this.node:this.placeholder}},y}(Galaxy),function(l){if(!window.gsap)return l.View.NODE_BLUEPRINT_PROPERTY_MAP.animations={type:"prop",key:"animations",update:function(e,t){t.enter&&t.enter.onComplete&&(e.populateEnterSequence=t.enter.onComplete),e.populateLeaveSequence=function(e){e()}}},window.gsap={to:function(a,s){return requestAnimationFrame(function(){"string"==typeof a&&(a=document.querySelector(a));var e=a.style;if(e)for(var t=Object.keys(s),n=0,r=t.length;n<r;n++){var o=t[n],i=s[o];switch(o){case"duration":case"ease":break;case"opacity":case"z-index":e.setProperty(o,i);break;case"scrollTo":a.scrollTop="string"==typeof i.y?document.querySelector(i.y).offsetTop:i.y,a.scrollLeft="string"==typeof i.x?document.querySelector(i.x).offsetLeft:i.x;break;default:e.setProperty(o,"number"==typeof i&&0!==i?i+"px":i)}}else Object.assign(a,s)})}},console.info("%cPlease load GSAP - GreenSock in order to activate animations","color: yellowgreen; font-weight: bold;"),console.info("%cYou can implement most common animations by loading the following resources","color: yellowgreen;"),console.info("https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"),console.info("https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/ScrollToPlugin.min.js"),console.info("https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/EasePack.min.js\n\n");function s(e,t){return e?"add:"+t:"remove:"+t}function u(e,t,n){return e[s(t,n)]}function c(e){gsap.getTweensOf(this.node).length&&gsap.killTweensOf(this.node),this.parent.transitory?this.dump():e()}l.View.NODE_BLUEPRINT_PROPERTY_MAP.animations={type:"prop",key:"animations",update:function(i,a){var t,o;!i.virtual&&a&&((t=a.enter)&&(i.populateEnterSequence=function(){if(t.withParent){if(function e(t){if(!t.parent)return!1;var n=t.parent;return!!(n.blueprint.animations&&n.blueprint.animations.enter&&gsap.getTweensOf(n.node).length)||e(t.parent)}(this))return gsap.set(this.node,f.parseStep(this,t.to)||{});if(!this.parent.rendered.resolved)return}var e=this.node;gsap.getTweensOf(e).length&&gsap.killTweensOf(e),f.installGSAPAnimation(this,"enter",t)}),(o=a.leave)?(!t&&i.blueprint.if&&(console.warn("The following node has `if` and a `leave` animation but does NOT have a `enter` animation.\nThis can result in unexpected UI behavior.\nTry to define a `enter` animation that negates the leave animation to prevent unexpected behavior\n\n"),console.warn(i.node)),i.populateLeaveSequence=function(e){if(!1===f.parseStep(i,o.active))return c.call(i,e);var t=f.parseStep(i,o.withParent);i.leaveWithParent=!0===t;var n=this.node;if((gsap.getTweensOf(n).length&&gsap.killTweensOf(n),t)&&this.parent.transitory)return this.dump();var r=n.getBoundingClientRect();if(0===r.width||0===r.height||"0"===n.style.opacity||"hidden"===n.style.visibility)return gsap.killTweensOf(n),e();f.installGSAPAnimation(this,"leave",o,e)},i.populateHideSequence=i.populateLeaveSequence.bind(i,function(){i.node.style.display="none"})):i.populateLeaveSequence=c.bind(i),i.cache.class&&i.cache.class.observer&&i.rendered.then(function(){var o=i.cache.class.observer.context;for(var e in o){var t=Boolean(o[e]),n=u(a,t,e);n&&gsap.set(i.node,f.parseStep(i,n.to))}i.cache.class.observer.onAll(function(e){var t=Boolean(o[e]),n=s(t,e),r=u(a,t,e);r&&(t&&!i.node.classList.contains(e)||!t&&i.node.classList.contains(e))&&f.installGSAPAnimation(i,n,r)})}))}},(l.View.AnimationMeta=f).ANIMATIONS={},f.TIMELINES={},f.createSimpleAnimation=function(e,t,n){n=n||l.View.EMPTY_CALL;var r,o,i,a=e.node,s=f.parseStep(e,t.from),u=f.parseStep(e,t.to),c=f.parseStep(e,t.duration)||0;return u&&((u=Object.assign({},u)).duration=c,u.onComplete=n,t.onComplete&&(r=t.onComplete,u.onComplete=function(){r(),n()})),s&&u?gsap.fromTo(a,s,u):s?((s=Object.assign({},s)).duration=c,s.onComplete=n,t.onComplete&&(o=t.onComplete,s.onComplete=function(){o(),n()}),gsap.from(a,s)):u?gsap.to(a,u):t.onComplete?(i=t.onComplete,gsap.to(a,{duration:c,onComplete:function(){i(),n()}})):gsap.to(a,{duration:c,onComplete:n})},f.createStep=function(e,t,n,r){var o=Object.assign({},e);return o.callbackScope=r,o.onStart=t,o.onComplete=n,o},f.parseStep=function(e,t){return t instanceof Function?t.call(e,e.data):t},f.installGSAPAnimation=function(e,t,n,r){var o=f.parseStep(e,n.from),i=f.parseStep(e,n.to);"leave"!==t&&i&&(i.clearProps=i.hasOwnProperty("clearProps")?i.clearProps:"all"),0!==t.indexOf("add:")&&0!==t.indexOf("remove:")||(i=Object.assign(i||{},{overwrite:"none"}));var a=Object.assign({},n);a.from=o,a.to=i;var s=a.timeline;a.timeline instanceof Function&&(s=a.timeline.call(e));var u=null;if(s){var c=new f(s);if(a.addTo&&(u=new f(a.addTo),c.addTo(u,a.positionInParent)),a.await&&-1===c.awaits.indexOf(a.await)){for(var l=c.timeline;l.parent!==gsap.globalTimeline;){if(!l.parent)return;l=l.parent}c.awaits.push(a.await);var p=l.addPause(a.position,function(){return e.transitory||e.destroyed.resolved?l.resume():void a.await.then(d)}).recent(),d=function(e){var t=c.awaits.indexOf(a.await);-1!==t&&(c.awaits.splice(t,1),e._initted?l.resume():-1!==l.getChildren(!1).indexOf(e)&&l.remove(e))}.bind(null,p);e.finalize.push(function(){-1!==c.awaits.indexOf(a.await)&&e.node.style&&(e.node.style.display="none"),d()})}c.type&&c.type!==t&&a.position&&-1!==a.position.indexOf("=")&&(a.position=a.startPosition),c.type=t,c.add(e,a,r),a.addTo&&u&&(u.started||(u.started=!0,u.timeline.resume()))}else f.createSimpleAnimation(e,a,r)};var i={};function f(e){var t=this;if(e&&"string"!=typeof e){if(e.__am__)return e.__am__;var n=e.eventCallback("onComplete")||Galaxy.View.EMPTY_CALL;t.name="<user-defined>",t.timeline=e,t.timeline.__am__=this,t.timeline.eventCallback("onComplete",function(){n.call(t.timeline),t.onCompletesActions.forEach(function(e){e(t.timeline)}),t.nodes=[],t.awaits=[],t.children=[],t.onCompletesActions=[]}),t.parsePosition=function(e){return e},t.addTo=function(e){throw new Error("You can not use addTo with a custom timeline: "+e)}}else{var r=f.ANIMATIONS[e];if(r)return r.timeline.getChildren().length||r.timeline.isActive()||(r.timeline.clear(!1),r.timeline.invalidate()),r;t.name=e,t.timeline=gsap.timeline({autoRemoveChildren:!0,smoothChildTiming:!1,paused:!0,onComplete:function(){t.onCompletesActions.forEach(function(e){e(t.timeline)}),t.nodes=[],t.awaits=[],t.children=[],t.onCompletesActions=[],f.ANIMATIONS[e]=null}}),t.timeline.data={name:e},t.labelCounter=0,t.labelsMap={};var o=i[e];o&&t.setupLabels(o),f.ANIMATIONS[e]=this}t.type=null,t.onCompletesActions=[],t.started=!1,t.configs={},t.children=[],t.nodes=[],t.awaits=[]}l.setupTimeline=function(e,t){i[e]=t;var n=f.ANIMATIONS[e];n&&n.setupLabels(t)},Galaxy.TIMELINE_SETUP_MAP=i,f.prototype={setupLabels:function(e){for(var t in e){var n="label_"+this.labelCounter++,r=e[t];this.labelsMap[t]=n,this.timeline.addLabel(n,"number"==typeof r?"+="+r:r)}},parsePosition:function(e){var t=this.labelsMap[e]||e,n=null;return t&&(-1!==t.indexOf("+=")?n=t.split("+=")[0]:-1!==t.indexOf("-=")&&(n=t.split("-=")[0])),n&&"<"!==n&&">"!==n&&(t=t.replace(n,this.labelsMap[n])),t},addOnComplete:function(e){this.onCompletesActions.push(e)},addTo:function(e,t){-1===e.timeline.getChildren(!1).indexOf(this.timeline)&&e.timeline.add(this.timeline,e.parsePosition(t))},add:function(e,t,n){var r,o,i,a=this,s=null,u=t.duration;if(u instanceof Function&&(u=t.duration.call(e)),s=t.from&&t.to?((r=f.createStep(t.to,t.onStart,t.onComplete,e)).duration=u||0,gsap.fromTo(e.node,t.from,r)):t.from?((o=f.createStep(t.from,t.onStart,t.onComplete,e)).duration=u||0,gsap.from(e.node,o)):((i=f.createStep(t.to,t.onStart,t.onComplete,e)).duration=u||0,gsap.to(e.node,i)),n){if(s.vars.onComplete){var c=s.vars.onComplete;return function(){c.apply(this,arguments),n()}}s.vars.onComplete=n}var l=this.parsePosition(t.position),p=a.timeline.getChildren(!1),d=p[0];0===p.length?a.timeline.add(s,l&&-1===l.indexOf("=")?l:null):(1!==p.length||d.hasOwnProperty("timeline")||0!==d.getChildren(!1).length||a.timeline.clear(!1),a.timeline.add(s,l)),a.started||"<user-defined>"===a.name||(a.started=!0,a.timeline.resume())}}}(Galaxy),function(a){a.View.NODE_BLUEPRINT_PROPERTY_MAP.checked={type:"prop",key:"checked",beforeActivate:function(e,n,t,r){if(n){if(r&&"input"===e.blueprint.tag)throw new Error("input.checked property does not support binding expressions because it must be able to change its data.\nIt uses its bound value as its `model` and expressions can not be used as model.\n");var o=a.View.getBindings(e.blueprint.checked).propertyKeys[0].split(".").pop(),i=e.node;i.addEventListener("change",function(){var e,t;/\[\]$/.test(i.name)&&"radio"!==i.type?(e=n.data[o],t=!i.hasAttribute("value")||i.value,e instanceof Array?-1===e.indexOf(t)?e.push(t):e.splice(e.indexOf(t),1):n.data[o]=[t]):i.hasAttribute("value")?n.data[o]=i.checked?i.value:null:n.data[o]=i.checked})}},update:function(e,t){var n=e.node;e.rendered.then(function(){if(/\[\]$/.test(n.name)){if("radio"===n.type)return console.error("Inputs with type `radio` can not provide array as a value."),console.warn("Read about radio input at: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/radio");var e=!n.hasAttribute("value")||n.value;t instanceof Array?n.checked=-1!==t.indexOf(e):n.checked=t===e}else n.hasAttribute("value")?n.checked=t===n.value:n.checked=t})}}}(Galaxy),function(o){function i(t,e){var n=t.node.className||[],r=function(e){if("string"==typeof e)return[e];if(e instanceof Array)return e;if(null!==e&&"object"===_typeof(e)){var t=[];for(var n in e)e.hasOwnProperty(n)&&e[n]&&t.push(n);return t}}(e);JSON.stringify(n)!==JSON.stringify(r)&&o.View.CREATE_IN_NEXT_FRAME(t.index,function(e){t.node.className=r.join(" "),e()})}o.View.REACTIVE_BEHAVIORS.class=!0,o.View.NODE_BLUEPRINT_PROPERTY_MAP.class={type:"reactive",key:"class",getConfig:function(e,t){return{scope:e,subjects:t,reactiveClasses:null,observer:null}},install:function(e){if(this.virtual||null===e.subjects||e.subjects instanceof Array||"object"!==_typeof(e.subjects))return!0;var t=this,n=e.reactiveClasses=o.View.bindSubjectsToData(t,e.subjects,e.scope,!0),r=e.observer=new o.Observer(n);return t.blueprint.renderConfig.applyClassListAfterRender?t.rendered.then(function(){i(t,n),r.onAll(function(){i(t,n)})}):r.onAll(function(){i(t,n)}),!0},update:function(e,t,n){if(!this.virtual){var r=this,o=r.node;if(n&&(t=n()),"string"==typeof t||null==t)return o.className=t;if(t instanceof Array)return o.className=t.join(" ");e.subjects===t&&(t=e.reactiveClasses),r.blueprint.renderConfig.applyClassListAfterRender?r.rendered.then(function(){i(r,t)}):i(r,t)}}}}(Galaxy),function(r){r.View.NODE_BLUEPRINT_PROPERTY_MAP.disabled={type:"attr",key:"disabled",update:function(t,n,e){t.rendered.then(function(){var e;"form"===t.blueprint.tag.toLowerCase()&&(e=t.node.querySelectorAll("input, textarea, select, button"),n?Array.prototype.forEach.call(e,function(e){return e.setAttribute("disabled","")}):Array.prototype.forEach.call(e,function(e){return e.removeAttribute("disabled")}))}),r.View.setAttr(t,n?"":null,e)}}}(Galaxy),function(e){e.View.REACTIVE_BEHAVIORS.if=!0,e.View.NODE_BLUEPRINT_PROPERTY_MAP.if={type:"reactive",key:"if",getConfig:function(){return{throttleId:null}},install:function(){return!0},update:function(e,t,n){var r=this;n&&(t=n()),t=Boolean(t),r.rendered.resolved||t||(r.blueprint.renderConfig.renderDetached=!0),r.rendered.then(function(){r.node.setAttribute("data-if",t),r.inDOM!==t&&r.setInDOM(t)})}}}(Galaxy),function(s){s.View.REACTIVE_BEHAVIORS.module=!0,s.View.NODE_BLUEPRINT_PROPERTY_MAP.module={type:"reactive",key:"module",getConfig:function(e){return{module:null,moduleMeta:null,scope:e}},install:function(){return!0},update:function(t,n,e){var r=this;if(e&&(n=e()),void 0!==n)return"object"!==_typeof(n)?console.error("module property only accept objects as value",n):void(n&&t.moduleMeta&&n.path===t.moduleMeta.path||(n&&n===t.moduleMeta||s.View.DESTROY_IN_NEXT_FRAME(r.index,function(e){!function(e){for(var t=e.getChildNodes(),n=0,r=t.length;n<r;n++){var o=t[n];o.populateLeaveSequence===i&&(o.populateLeaveSequence=function(e){e()})}e.clean(!0)}(r),e()}),!r.virtual&&n&&n.path&&n!==t.moduleMeta&&s.View.CREATE_IN_NEXT_FRAME(r.index,function(e){(function(t,n,e,r){n.module&&n.module.destroy();var o=new s.GalaxyURI(e.path),i=n.scope,a=n.scope;for(;i;){if(a instanceof s.Scope||(a=new s.Scope({systemId:"repeat-item",path:n.scope.__parent__.uri.parsedURL,parentScope:n.scope.__parent__})),o.parsedURL===a.uri.parsedURL)return console.error("Circular module loading detected and stopped. \n"+a.uri.parsedURL+" tries to load itself.");i=i.parentScope}a.load(e,{element:t}).then(function(e){n.module=e,t.node.setAttribute("module",e.path),e.start(),r()}).catch(function(e){console.error(e),r()})}).call(null,r,t,n,e)}),t.moduleMeta=n))}};var i=Galaxy.View.EMPTY_CALL}(Galaxy),Galaxy.View.NODE_BLUEPRINT_PROPERTY_MAP.on={type:"prop",key:"on",update:function(n,r){if(null!==r&&"object"===_typeof(r)){for(var e in r)!function(t){var e;r.hasOwnProperty(t)&&(e=function(e){return r[t].call(n,e,n.data)},n.node.addEventListener(t,e,!1),n.finalize.push(function(){n.node.removeEventListener(t,e,!1)}))}(e)}}},function(l){var k=l.View,b=l.clone,V=l.View.DESTROY_NODES;function D(e,t,n,r,o,i,a,s,u,c,l,p){var d,f,h,y,v=(d=n,f=r,h=o,(y=k.createChildScope(d))[f]=h,y),m=b(t);v[i]=a;var _=e.createNode(m,v,s,u);c.call(l,_,p[a],v[r])}k.REACTIVE_BEHAVIORS.repeat=!0,k.NODE_BLUEPRINT_PROPERTY_MAP.repeat={type:"reactive",key:"repeat",getConfig:function(e,t){return this.virtualize(),{changeId:null,previousActionId:null,nodes:[],data:t.data,as:t.as,indexAs:t.indexAs||"_index",oldChanges:{},positions:[],trackMap:[],scope:e,trackBy:t.trackBy,onComplete:t.onComplete}},install:function(n){var r=this;if(n.data){if("data"===n.as)throw new Error("`data` is an invalid value for repeat.as property. Please choose a different value.`");r.localPropertyNames.add(n.as),r.localPropertyNames.add(n.indexAs);var e,t,o=k.getBindings(n.data);o.propertyKeys.length?(k.makeBinding(r,"repeat",void 0,n.scope,o,r),o.propertyKeys.forEach(function(t){try{var e=k.propertyRDLookup(n.scope,t);r.finalize.push(function(){e.removeNode(r)})}catch(e){console.error("Could not find: "+t+"\n",e)}})):n.data instanceof Array&&(e=r.setters.repeat=k.getPropertySetterForNode(l.View.NODE_BLUEPRINT_PROPERTY_MAP.repeat,r,n.data,null,n.scope),(t=new l.View.ArrayChange).params=n.data,n.data.changes=t,e(n.data))}return!1},update:function(e,t,n){var r,o=null;if(n){if(null==(t=n()))return;var i,a,s,o=t instanceof l.View.ArrayChange?t:t instanceof Array?((i=new l.View.ArrayChange).original=t,i.type="reset",(i.params=t).changes=i):t instanceof Object?(a=Object.entries(t).map(function(e){var t=_slicedToArray(e,2);return{key:t[0],value:t[1]}}),(s=new l.View.ArrayChange).original=a,s.type="reset",s.params=a,t.changes=s):{type:"reset",params:[]}}else{t instanceof l.View.ArrayChange?o=t:t instanceof Array?o=t.changes:t instanceof Object&&(r=Object.entries(t).map(function(e){var t=_slicedToArray(e,2);return{key:t[0],value:t[1]}}),(o=new l.View.ArrayChange).original=r,o.type="reset",o.params=r)}if(o&&!(o instanceof l.View.ArrayChange))return console.warn("%crepeat %cdata is not a type of ArrayChange\ndata: "+e.data+"\n%ctry '"+e.data+".changes'\n","color:black;font-weight:bold",null,"color:green;font-weight:bold");o&&"string"!=typeof o||(o={id:0,type:"reset",params:[]});o.id!==e.changeId&&(e.changeId=o.id,e.oldChanges=o,function(e,r,t){var n=e.parent,o=[],i=[],a=r.scope,s=r.trackMap,u=r.as,c=r.indexAs,l=r.nodes,p=r.trackBy,d=e.cloneBlueprint();Reflect.deleteProperty(d,"repeat");var f,h=l.length?l[l.length-1].anchor.nextSibling:e.placeholder.nextSibling,y=[];f=!0===p?function(e,t,n){s.push(n),this.push(e)}:function(e,t,n){s.push(n[r.trackBy]),this.push(e)};if("push"===t.type)y=t.params;else if("unshift"===t.type)h=l[0]?l[0].anchor:h,y=t.params,f=!0===p?function(e,t,n){s.unshift(n),this.unshift(e)}:function(e,t,n){s.unshift(n[p]),this.unshift(e)};else if("splice"===t.type){var v=t.params.slice(0,2),m=Array.prototype.splice.apply(l,v);V(m.reverse(),e.blueprint.animations&&e.blueprint.animations.leave),Array.prototype.splice.apply(s,v);var _=t.params[0];y=t.params.slice(2);for(var b=0,g=y.length;b<g;b++){var w=b+_;o.push(w),i.push(l[w]?l[w].anchor:h)}f=!0===p?function(e,t,n){s.splice(t,0,n),this.splice(t,0,e)}:function(e,t,n){s.splice(t,0,n[p]),this.splice(t,0,e)}}else{var E,O;"pop"===t.type?((E=l.pop())&&E.destroy(),s.pop()):"shift"===t.type?((O=l.shift())&&O.destroy(),s.shift()):"sort"!==t.type&&"reverse"!==t.type||(l.forEach(function(e){e.destroy()}),r.nodes=[],y=t.original,Array.prototype[t.type].call(s))}var P=e.view;if(y instanceof Array){var R=y.slice(0);if(p)if(!0===p)for(var A=0,x=y.length;A<x;A++){var S=R[A],T=s.indexOf(S);-1===T?D(P,d,a,u,S,c,A,n,i[A]||h,f,l,o):r.nodes[T].data._index=T}else for(var N=0,C=y.length;N<C;N++){var j=R[N],I=s.indexOf(j[p]);-1===I?D(P,d,a,u,j,c,N,n,i[N]||h,f,l,o):r.nodes[I].data._index=I}else for(var M=0,L=y.length;M<L;M++)D(P,d,a,u,R[M],c,M,n,i[M]||h,f,l,o);r.onComplete&&k.CREATE_IN_NEXT_FRAME(e.index,function(e){r.onComplete(l),e()})}}(this,e,function(e,n,t){var r,o=e.blueprint.animations&&e.blueprint.animations.leave,i=n.trackBy;{if(i&&"reset"===t.type){!0===i?r=t.params.map(function(e){return e}):"string"==typeof i&&(r=t.params.map(function(e){return e[i]}));var a=[];n.trackMap=n.trackMap.filter(function(e,t){return-1!==r.indexOf(e)||!n.nodes[t]||(a.push(n.nodes[t]),!1)});var s=new l.View.ArrayChange;return s.init=t.init,s.type=t.type,s.original=t.original,s.params=t.params,s.__rd__=t.__rd__,"reset"===s.type&&s.params.length&&(s.type="push"),n.nodes=n.nodes.filter(function(e){return-1===a.indexOf(e)}),V(a,o),s}if("reset"===t.type){var u=n.nodes.slice(0);n.nodes=[],V(u,o);var c=Object.assign({},t);return c.type="push",c}}return t}(this,e,o)))}}}(Galaxy),function(o){o.View.NODE_BLUEPRINT_PROPERTY_MAP.selected={type:"prop",key:"selected",beforeActivate:function(e,t,n,r){if(t){if(r&&"select"===e.blueprint.tag)throw new Error("select.selected property does not support binding expressions because it must be able to change its data.\nIt uses its bound value as its `model` and expressions can not be used as model.\n");"select"===e.blueprint.tag&&(o.View.getBindings(e.blueprint.selected).propertyKeys[0].split(".").pop(),e.node.addEventListener("change",function(e){}))}},update:function(e,t){var n=e.node;e.rendered.then(function(){n.value!==t&&("select"===e.blueprint.tag?n.value=t:t?n.setAttribute("selected"):n.removeAttribute("selected"))})}}}(Galaxy),function(r){function o(n,r){if(r instanceof Object){for(var e in r)!function(t){var e=r[t];e instanceof Promise?e.then(function(e){n.style[t]=e}):n.style[t]="function"==typeof e?e.call(n.__vn__):e}(e)}else n.style=r}r.View.REACTIVE_BEHAVIORS.style=!0,r.View.NODE_BLUEPRINT_PROPERTY_MAP.style_3={type:"prop",key:"style"},r.View.NODE_BLUEPRINT_PROPERTY_MAP.style_8={type:"prop",key:"style"},r.View.NODE_BLUEPRINT_PROPERTY_MAP.style={type:"reactive",key:"style",getConfig:function(e,t){return{scope:e,subjects:t,reactiveStyle:null}},install:function(e){if(this.virtual||null===e.subjects||e.subjects instanceof Array||"object"!==_typeof(e.subjects))return!0;var t=this.node,n=e.reactiveStyle=r.View.bindSubjectsToData(this,e.subjects,e.scope,!0);return new r.Observer(n).onAll(function(){o(t,n)}),!0},update:function(e,t,n){if(!this.virtual){var r=this.node;if(n&&(t=n()),"string"==typeof t)return r.style=t;if(t instanceof Array)return r.style=t.join(";");if(t instanceof Promise)t.then(function(e){o(r,e)});else if(null===t)return r.removeAttribute("style");e.subjects===t&&(t=e.reactiveStyle),o(r,t)}}}}(Galaxy),function(e){e.View.NODE_BLUEPRINT_PROPERTY_MAP.text_3={type:"prop",key:"nodeValue"},e.View.NODE_BLUEPRINT_PROPERTY_MAP.text_8={type:"prop",key:"nodeValue"},e.View.NODE_BLUEPRINT_PROPERTY_MAP.text={type:"prop",key:"text",update:function(e,t){var n=null==t?"":t;n instanceof Object&&(n=JSON.stringify(n));var r,o=e.node,i=o["<>text"];i?i.nodeValue=n:(r=o["<>text"]=document.createTextNode(n),o.insertBefore(r,o.firstChild))}}}(Galaxy),function(l){function p(t,n){return function(e){t.data[n]=e.target.value}}l.View.NODE_BLUEPRINT_PROPERTY_MAP["value.config"]={type:"none"},l.View.NODE_BLUEPRINT_PROPERTY_MAP.value={type:"prop",key:"value",beforeActivate:function(t,n,e,r){var o=t.node;if(n){if(r)throw new Error("input.value property does not support binding expressions because it must be able to change its data.\nIt uses its bound value as its `model` and expressions can not be used as model.\n");var i,a,s,u,c=l.View.getBindings(t.blueprint.value).propertyKeys[0].split(".").pop();"SELECT"===o.tagName?((i=new MutationObserver(function(e){t.rendered.then(function(){o.value=n.data[c]})})).observe(o,{childList:!0}),t.finalize.push(function(){i.disconnect()}),o.addEventListener("change",p(n,c))):"number"===o.type||"range"===o.type?o.addEventListener("input",(a=o,s=n,u=c,function(){s.data[u]=a.value?Number(a.value):null})):o.addEventListener("input",p(n,c))}},update:function(e,t){t===e.node.value&&e.node.value||(e.node.value=null==t?"":t)}}}(Galaxy),function(e){e.View.REACTIVE_BEHAVIORS.visible=!0,e.View.NODE_BLUEPRINT_PROPERTY_MAP.visible={type:"reactive",key:"visible",getConfig:function(){return{throttleId:null}},install:function(){return!0},update:function(e,t,n){e.throttleId&&(window.cancelAnimationFrame(e.throttleId),e.throttleId=0);var r=this;n&&(t=n()),e.throttleId=window.requestAnimationFrame(function(){r.rendered.then(function(){r.visible!==t&&r.setVisibility(t)})})}}}(Galaxy),function(a){a.View.PROPERTY_SETTERS.attr=function(r,e,t){function n(e){var t,n;e instanceof Promise?(t=function(e){i(r,e,o)},e.then(t).catch(t)):e instanceof Function?(n=e.call(r,r.data),i(r,n,o)):i(r,e,o)}var o=e.key,i=e.update||a.View.setAttr;return t?function(){var e=t();n(e)}:n}}(Galaxy),function(a){a.View.PROPERTY_SETTERS.prop=function(r,e,t){function n(e){var t,n;e instanceof Promise?(t=function(e){i(r,e,o)},e.then(t).catch(t)):e instanceof Function?(n=e.call(r,r.data),i(r,n,o)):i(r,e,o)}var o=e.key,i=e.update||a.View.setProp;return t?function(){var e=t();n(e)}:n}}(Galaxy),Galaxy.View.PROPERTY_SETTERS.reactive=function(e,t,n,r){var o,i,a,s,u,c=t.key,l=t.update,p=e.cache[c];return o=e,i=p,a=n,s=r,u=l.bind(o),function(e){return u(i,e,a,s)}},Galaxy.Router=function(l){function o(e,t){var n=this;if(n.config={baseURL:o.BASE_URL},n.scope=e,n.module=t,n.parentRouterScope=e.parentScope,n.parentRouterScope&&(!n.parentRouterScope.router||!n.parentRouterScope.router.activeRoute)){for(var r=n.parentRouterScope;!r.router||!r.router.activeRoute;)r=r.parentScope;n.config.baseURL=r.router.activePath,n.parentRouterScope=null}n.path=n.parentRouterScope&&n.parentRouterScope.router?n.parentRouterScope.router.activeRoute.path:"/",n.fullPath="/"===this.config.baseURL?this.path:this.config.baseURL+this.path,n.parentRoute=null,n.oldURL="",n.resolvedRouteValue=null,n.resolvedDynamicRouteValue=null,n.routesMap=null,n.data={routes:[],activeRoute:null,activePath:null,activeModule:null,viewports:{main:null},parameters:n.parentRouterScope&&n.parentRouterScope.router?n.parentRouterScope.router.parameters:{}},n.onTransitionFn=Galaxy.View.EMPTY_CALL,n.viewports={main:{tag:"div",module:"<>router.activeModule"}},Object.defineProperty(this,"urlParts",{get:function(){return n.oldURL.split("/").slice(1)},enumerable:!0}),"root"===t.id&&o.currentPath.update()}return o.PARAMETER_NAME_REGEX=new RegExp(/[:*](\w+)/g),o.PARAMETER_NAME_REPLACEMENT="([^/]+)",o.BASE_URL="/",o.currentPath={handlers:[],subscribe:function(e){this.handlers.push(e),e(location.pathname)},update:function(){this.handlers.forEach(function(e){e(location.pathname)})}},o.mainListener=function(e){o.currentPath.update()},o.prepareRoute=function(e,t,n){if(e instanceof Array){var r=e.map(function(e){return o.prepareRoute(e,t,n)});return t&&(t.activeRoute.children=r),r}return _objectSpread(_objectSpread({},e),{},{fullPath:n+e.path,active:!1,hidden:e.hidden||Boolean(e.redirectTo)||!1,viewports:e.viewports||{},parent:t?t.activeRoute:null,children:e.children||[]})},window.addEventListener("popstate",o.mainListener),o.prototype={setup:function(e){var t=this;return this.routes=o.prepareRoute(e,this.parentRouterScope?this.parentRouterScope.router:null,"/"===this.fullPath?"":this.fullPath),this.parentRouterScope&&this.parentRouterScope.router&&(this.parentRoute=this.parentRouterScope.router.activeRoute),this.routes.forEach(function(e){(e.viewports?Object.keys(e.viewports):[]).forEach(function(e){"main"===e||t.viewports[e]||(t.viewports[e]={tag:"div",module:"<>router.viewports."+e})})}),this.data.routes=this.routes,this},start:function(){this.listener=this.detect.bind(this),window.addEventListener("popstate",this.listener),this.detect()},navigateToPath:function(e,t){if(0!==e.indexOf("/"))throw new Error("Path argument is not starting with a `/`\nplease use `/"+e+"` instead of `"+e+"`");0!==e.indexOf(this.config.baseURL)&&(e=this.config.baseURL+e),window.location.pathname!==e&&setTimeout(function(){t?history.replaceState({},"",e):history.pushState({},"",e),dispatchEvent(new PopStateEvent("popstate",{state:{}}))})},navigate:function(e,t){0!==e.indexOf(this.path)&&(e=this.path+e),this.navigateToPath(e,t)},navigateToRoute:function(e,t){var n=e.path;e.parent&&(n=e.parent.path+e.path),this.navigate(n,t)},notFound:function(){},normalizeHash:function(e){if(0===e.indexOf("#!/"))throw new Error("Please use `#/` instead of `#!/` for you hash");var t=e;return 0!==e.indexOf("#/")&&(0!==e.indexOf("/")?t="/"+e:0===e.indexOf("#")&&(t=e.split("#").join("#/"))),t.replace(this.fullPath,"/").replace("//","/")||"/"},onTransition:function(e){return this.onTransitionFn=e,this},findMatchRoute:function(e,t,n){for(var r=this,o=0,i=r.normalizeHash(t),a=e.map(function(e){return e.path}),s=r.extractDynamicRoutes(a),u=0,c=s.length;u<c;u++){var l=s[u],p=l.paramFinderExpression.exec(i);if(p){o++;var d=r.createParamValueMap(l.paramNames,p.slice(1));if(r.resolvedDynamicRouteValue===t)return Object.assign(r.data.parameters,d);r.resolvedDynamicRouteValue=t,r.resolvedRouteValue=null;var f=a.indexOf(l.id),h=l.id.split("/").filter(function(e){return 0!==e.indexOf(":")}).join("/"),y=t.replace(h,"").split("/");if(!r.callRoute(e[f],y.join("/"),d,n))return}}var v=e.filter(function(e){return-1===s.indexOf(e)&&0===i.indexOf(e.path)}).reduce(function(e,t){return e.path.length>t.path.length?e:t});if(v){var m=i.slice(0,v.path.length);return r.resolvedRouteValue===m?Object.assign(r.data.parameters,r.createClearParameters()):(r.resolvedDynamicRouteValue=null,r.resolvedRouteValue=m,v.redirectTo?this.navigate(v.redirectTo,!0):(o++,r.callRoute(v,i,r.createClearParameters(),n)))}0===o&&console.warn("No associated route has been found",t)},callRoute:function(e,t,n,r){var o=this,i=this.data.activeRoute,a=this.data.activePath;if(this.onTransitionFn.call(this,a,e.path,i,e),e.redirectTo||(i&&(i.active=!1,"function"==typeof i.onLeave&&i.onLeave.call(null,a,e.path,i,e)),e.active=!0),"function"==typeof e.onEnter&&e.onEnter.call(null,a,e.path,i,e),this.data.activeRoute=e,this.data.activePath=e.path,"function"==typeof e.handle)return e.handle.call(this,n,r);var s=this.data.viewports;for(var u in s){var c=e.viewports[u]||null;"string"==typeof c&&(c={path:c}),"main"===u&&(this.data.activeModule=c),this.data.viewports[u]=c}return l.View.CREATE_IN_NEXT_FRAME(l.View.GET_MAX_INDEX(),function(e){Object.assign(o.data.parameters,n),e()}),!1},createClearParameters:function(){var t={};return Object.keys(this.data.parameters).forEach(function(e){return t[e]=void 0}),t},extractDynamicRoutes:function(e){return e.map(function(e){for(var t=[],n=o.PARAMETER_NAME_REGEX.exec(e);n;)t.push(n[1]),n=o.PARAMETER_NAME_REGEX.exec(e);return t.length?{id:e,paramNames:t,paramFinderExpression:new RegExp(e.replace(o.PARAMETER_NAME_REGEX,o.PARAMETER_NAME_REPLACEMENT))}:null}).filter(Boolean)},createParamValueMap:function(e,n){var r={};return e.forEach(function(e,t){r[e]=n[t]}),r},detect:function(){var e=window.location.pathname,t=e?"/"!==e.substring(-1)?e+"/":e:"/",n="/"===this.config.baseURL?this.path:this.config.baseURL+this.path;0===t.indexOf(n)&&t!==this.oldURL&&(this.oldURL=t,this.findMatchRoute(this.routes,t,{}))},getURLParts:function(){return this.oldURL.split("/").slice(1)},destroy:function(){this.parentRoute&&(this.parentRoute.children=[]),window.removeEventListener("popstate",this.listener)}},o}(Galaxy),Galaxy.registerAddOnProvider("galaxy/router",function(t,n){return{create:function(){var e=new Galaxy.Router(t,n);return"root"!==n.systemId&&t.on("module.destroy",function(){return e.destroy()}),t.router=e.data,e},start:function(){}}}),Galaxy.registerAddOnProvider("galaxy/view",function(e){return{create:function(){return new Galaxy.View(e)},start:function(){}}});