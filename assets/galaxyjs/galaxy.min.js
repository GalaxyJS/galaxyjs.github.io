"use strict";function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return a};var a={},e=Object.prototype,c=e.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o,i,a,s,t=t&&t.prototype instanceof d?t:d,t=Object.create(t.prototype),r=new w(r||[]);return l(t,"_invoke",{value:(o=e,i=n,a=r,s="suspendedStart",function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return O()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(void 0===o)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;r=u(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,p;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}(n,a);if(n){if(n===p)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";n=u(o,i,a);if("normal"===n.type){if(s=a.done?"completed":"suspendedYield",n.arg===p)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s="completed",a.method="throw",a.arg=n.arg)}})}),t}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var p={};function d(){}function f(){}function h(){}var t={},y=(i(t,r,function(){return this}),Object.getPrototypeOf),y=y&&y(y(E([]))),v=(y&&y!==e&&c.call(y,r)&&(t=y),h.prototype=d.prototype=Object.create(t));function m(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function g(a,s){var t;l(this,"_invoke",{value:function(n,r){function e(){return new s(function(e,t){!function t(e,n,r,o){var i,e=u(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==_typeof(n)&&c.call(n,"__await")?s.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):s.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(c.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:O}}function O(){return{value:void 0,done:!0}}return l(v,"constructor",{value:f.prototype=h,configurable:!0}),l(h,"constructor",{value:f,configurable:!0}),f.displayName=i(h,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},a.awrap=function(e){return{__await:e}},m(g.prototype),i(g.prototype,n,function(){return this}),a.AsyncIterator=g,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new g(s(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},m(v),i(v,o,"Generator"),i(v,r,function(){return this}),i(v,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=E,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=c.call(o,"catchLoc"),s=c.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},a}function asyncGeneratorStep(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _asyncToGenerator(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function o(e){asyncGeneratorStep(r,t,n,o,i,"next",e)}function i(e){asyncGeneratorStep(r,t,n,o,i,"throw",e)}o(void 0)})}}window.Galaxy=window.Galaxy||function(){var l=Object.getPrototypeOf(_asyncToGenerator(_regeneratorRuntime().mark(function e(){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))).constructor,d=(Array.prototype.unique=function(){for(var e=this.concat(),t=0,n=e.length;t<n;++t)for(var r=t+1,o=e.length;r<o;++r)e[t]===e[r]&&e.splice(r--,1);return e},{});function e(){this.moduleContents={},this.addOnProviders=[],this.rootElement=null,this.bootModule=null}e.cm=d,e.prototype={extend:function(e){for(var t,n=e||{},r=1;r<arguments.length;r++)if(t=arguments[r])for(var o in t)t.hasOwnProperty(o)&&(t[o]instanceof Array?n[o]=this.extend(n[o]||[],t[o]):"object"===_typeof(t[o])&&null!==t[o]?n[o]=this.extend(n[o]||{},t[o]):n[o]=t[o]);return n},clone:function(e){var t,n,r;for(n in(t=e instanceof Array?[]:{}).__proto__=e.__proto__,e)e.hasOwnProperty(n)&&((r=e[n])instanceof Promise||"object"!==_typeof(r)||null===r||"animations"===n&&r&&"object"===_typeof(r)?t[n]=r:t[n]=Galaxy.clone(r));return t},boot:function(e){var r=this;if(r.rootElement=e.element,e.id="root",r.rootElement)return new Promise(function(t,n){r.load(e).then(function(e){r.bootModule=e,t(e)}).catch(function(e){console.error("Something went wrong",e),n()})});throw new Error("element property is mandatory")},convertToURIString:function(e,t){var n,r,o,i=[];for(n in e)e.hasOwnProperty(n)&&(r=t?t+"["+n+"]":n,o=e[n],i.push(null!==o&&"object"===_typeof(o)?this.convertToURIString(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o)));return i.join("&")},load:function(i){var a;if(i)return a=this,new Promise(function(t,n){if(i.hasOwnProperty("constructor")&&"function"==typeof i.constructor)return i.path=i.id="internal/"+(new Date).valueOf()+"-"+Math.round(performance.now()),i.systemId=i.parentScope?i.parentScope.systemId+"/"+i.id:i.id,a.compileModuleContent(i,i.constructor,[]).then(function(e){return a.executeCompiledModule(e).then(t)});i.id||(i.id=0===i.path.indexOf("/")?i.path.substring(1):i.path),i.systemId=i.parentScope?i.parentScope.systemId+"/"+i.id:i.id;var r=[i.path];if(i.invokers){if(-1!==i.invokers.indexOf(i.path))throw new Error("circular dependencies: \n"+i.invokers.join("\n")+"\nwant to load: "+i.path);(r=i.invokers).push(i.path)}var o=i.path,e=Galaxy.moduleContents[o];e&&!i.fresh||(Galaxy.moduleContents[o]=e=fetch(o).then(function(e){return e.ok?e:(console.error(e.statusText,o),n(e.statusText))}).catch(n)),(e=e.then(function(e){var t=i.contentType||e.headers.get("content-type");return e.clone().text().then(function(e){return new Galaxy.Module.Content(t,e,i)})})).then(function(e){return a.compileModuleContent(i,e,r)}).then(function(e){return a.executeCompiledModule(e)}).then(t).catch(n)});throw new Error("Module meta data or constructor is missing")},compileModuleContent:function(c,l,u){var p=this;return new Promise(function(n,e){function r(e,t){t.splice(t.indexOf(e.path)-1,1),0===t.length&&n(e)}"function"==typeof l&&(l=new Galaxy.Module.Content("function",l,c));var o,t=Galaxy.Module.Content.parse(l),i=t.imports,t=t.source,a=new Galaxy.Scope(c,c.element||p.rootElement),s=new Galaxy.Module(c,t,a);i.length?(o=i.slice(0),i.forEach(function(e){var t,n=Galaxy.getModuleAddOnProvider(e.path);n?(t=(n=n.handler.call(null,a,s)).create(),s.registerAddOn(e.path,t),s.addOnProviders.push(n),r(s,o)):d[e.path]&&!e.fresh?r(s,o):(0===e.path.indexOf("./")&&(e.path=a.uri.path+e.path.substr(2)),Galaxy.load({name:e.name,path:e.path,fresh:e.fresh,contentType:e.contentType,parentScope:a,invokers:u}).then(function(){r(s,o)}))})):n(s)})},executeCompiledModule:function(c){return new Promise(function(t,n){try{for(var e in c.addOns)c.scope.inject(e,c.addOns[e]);for(var r in d){var o;d.hasOwnProperty(r)&&(o=d[r]).module&&c.scope.inject(o.id,o.module)}var i=c.source,a=("function"==typeof i?i:new l("Scope",["// "+c.id+": "+c.path,i].join("\n"))).call(null,c.scope),s=function(){Reflect.deleteProperty(c,"source"),c.addOnProviders.forEach(function(e){return e.start()}),Reflect.deleteProperty(c,"addOnProviders");var e=c.path,e=(c.scope.export._temp?c.scope.parentScope.inject(e,c.scope.export):d[e]||(d[e]={id:e,module:c.scope.export}),c);return e.init(),t(e)};a?a.then(s):s()}catch(e){throw console.error(e.message+": "+c.path),console.warn("Search for es6 features in your code and remove them if your browser does not support them, e.g. arrow function"),console.error(e),n(),new Error(e)}})},getModuleAddOnProvider:function(t){return this.addOnProviders.filter(function(e){return e.name===t})[0]},registerAddOnProvider:function(e,t){if("function"!=typeof t)throw"Addon provider should be a function";this.addOnProviders.push({name:e,handler:t})}};var t=new e;return t.Core=e,t}(),Galaxy.Module=function(){function e(e,t,n){this.id=e.id,this.systemId=e.systemId,this.source=t,this.path=e.path||null,this.importId=e.importId||e.path,this.addOns=e.addOns||{},this.addOnProviders=[],this.scope=n}return e.prototype={init:function(){this.scope.trigger("module.init")},start:function(){this.scope.trigger("module.start")},destroy:function(){this.scope.trigger("module.destroy")},registerAddOn:function(e,t){this.addOns[e]=t}},e}(),Galaxy.Module.Content=function(){var n={};function e(e,t,n){this.type=e,this.content=t,this.metaData=n}return e.parse=function(e){var t=(e.type||"").split(";")[0],t=n[t];return(t||n.default).call(null,e.content,e.metaData)},e.registerParser=function(e,t){n[e]=t},e.prototype={},e}(),Galaxy.Observer=function(){var n=Object.defineProperty;function e(e){this.context=e,this.subjectsActions={},this.allSubjectAction=[];var t="__observers__";this.context.hasOwnProperty(t)||n(e,t,{value:[],writable:!0,configurable:!0}),this.context[t].push(this)}return e.notify=function(e,t,n){e=e.__observers__;void 0!==e&&e.forEach(function(e){e.notify(t,n)})},e.prototype={remove:function(){var e=this.context.__observers__,t=e.indexOf(this);-1!==t&&e.splice(t,1)},notify:function(t,n){var r=this;r.subjectsActions.hasOwnProperty(t)&&r.subjectsActions[t].call(r.context,n),r.allSubjectAction.forEach(function(e){e.call(r.context,t,n)})},on:function(e,t){this.subjectsActions[e]=t},onAll:function(e){-1===this.allSubjectAction.indexOf(e)&&this.allSubjectAction.push(e)}},e}(),Galaxy.Scope=function(){var o=Object.defineProperty;function e(e,t){var n=this,r=(n.systemId=e.systemId,n.parentScope=e.parentScope||null,n.element=t||null,n.export={},n.uri=new Galaxy.GalaxyURI(e.path),n.eventHandlers={},n.observers=[],n.element.data?Galaxy.View.bindSubjectsToData(n.element,n.element.data,n.parentScope,!0):{});o(n,"data",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Object.assign(r,e)}}),o(n,"__imports__",{value:{},writable:!1,enumerable:!1,configurable:!1}),n.on("module.destroy",this.destroy.bind(n))}return e.prototype={inject:function(e,t){this.__imports__[e]=t},import:function(e){return 0===e.indexOf("./")&&(e=e.replace("./",this.uri.path)),this.__imports__[e]},destroy:function(){this.data=null,this.observers.forEach(function(e){e.remove()})},kill:function(){throw Error("Scope.kill() should not be invoked at the runtime")},load:function(e,t){t=Object.assign({},e,t||{});return 0===t.path.indexOf("./")&&(t.path=this.uri.path+e.path.substr(2)),t.parentScope=this,Galaxy.load(t)},loadModuleInto:function(e,t){return this.load(e,{element:t}).then(function(e){return e.start(),e})},on:function(e,t){this.eventHandlers[e]||(this.eventHandlers[e]=[]),-1===this.eventHandlers[e].indexOf(t)&&this.eventHandlers[e].push(t)},trigger:function(e,t){this.eventHandlers[e]&&this.eventHandlers[e].forEach(function(e){e.call(null,t)})},observe:function(e){e=new Galaxy.Observer(e);return this.observers.push(e),e}},e}(),Galaxy.GalaxyURI=function(e){var t=document.createElement("a"),e=(t.href=e,/([^\t\n]+)\//g.exec(t.pathname));this.parsedURL=t.href,this.path=e?e[0]:"/",this.base=window.location.pathname,this.protocol=t.protocol},Galaxy.View=function(v){var m=Object.defineProperty,g=Object.keys,e=Array.prototype.concat.bind([]),i=["text","comment","a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","plaintext","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"];function o(e,t){if("object"===_typeof(t)&&null!==t){var n,r={};for(n in t){var o=t[n];"object"===_typeof(o)?r[n]=JSON.stringify(o):r[n]=o}Object.assign(e.dataset,r)}else e.dataset=null}function s(e,t){var n=(t=t.split("."))[0],r=e,o=e,i=e;if(void 0===e[n]){for(;i.__parent__;){if(i.__parent__.hasOwnProperty(n)){o=i.__parent__;break}i=i.__parent__}void 0===o[n]&&(o=r)}var o=o||{},a=t.length-1;return t.forEach(function(e,t){o=o[e],t===a||o instanceof Object||(o={})}),o instanceof v.View.ArrayChange?o.getInstance():void 0===o?null:o}Array.prototype.createDataMap=function(e,t){for(var n={},r=0,o=this.length;r<o;r++){var i=this[r];n[i[e]]=i[t]}return n},T.EMPTY_CALL=function(){},T.GET_MAX_INDEX=function(){return"@"+performance.now()},T.BINDING_SYNTAX_REGEX=new RegExp("^<([^\\[\\]<>]*)>\\s*([^\\[\\]<>]*)\\s*$|^=\\s*([^\\[\\]<>]*)\\s*$"),T.REACTIVE_BEHAVIORS={data:!0},T.COMPONENTS={},T.NODE_BLUEPRINT_PROPERTY_MAP={tag:{type:"none"},props:{type:"none"},children:{type:"none"},data_3:{type:"none",key:"data"},data_8:{type:"none",key:"data"},html:{type:"prop",key:"innerHTML"},data:{type:"reactive",key:"data",getConfig:function(e,t){if(null!==t&&("object"!==_typeof(t)||t instanceof Array))throw new Error("data property should be an object with explicits keys:\n"+JSON.stringify(this.blueprint,null,"  "));return{reactiveData:null,subjects:t,scope:e}},install:function(n){var r=this;if(n.scope.data===n.subjects)throw new Error("It is not allowed to use Scope.data as data value");if(this.blueprint.module)return Object.assign(this.data,n.subjects),!1;n.reactiveData=v.View.bindSubjectsToData(this,n.subjects,n.scope,!0),new v.Observer(n.reactiveData).onAll(function(e,t){o(r.node,n.reactiveData)})},update:function(e,t,n){n&&(t=n()),e.subjects===t&&(t=e.reactiveData),o(this.node,t)}},onchange:{type:"event"},onclick:{type:"event"},ondblclick:{type:"event"},onmouseover:{type:"event"},onmouseout:{type:"event"},onkeydown:{type:"event"},onkeypress:{type:"event"},onkeyup:{type:"event"},onmousedown:{type:"event"},onmouseup:{type:"event"},onload:{type:"event"},onabort:{type:"event"},onerror:{type:"event"},onfocus:{type:"event"},onblur:{type:"event"},onreset:{type:"event"},onsubmit:{type:"event"}},T.PROPERTY_SETTERS={none:function(){return T.EMPTY_CALL}};function n(e,t){if(t)return e();this.length?this.shift()(n.bind(this,e)):e()}function r(){var t=this;if(f)return f=!1,h=0,r.call(p);var e=performance.now();h+=e-(y=y||e),y=e,2<h?(h=0,a&&(clearTimeout(a),a=null),a=setTimeout(function(e){y=e,_.call(t)})):_.call(this)}var a,t,c=T.DOM_MANIPLATION={},l=[],u=[],p=[],d=!0,f=!1,h=0,y=0,_=function(){if(this.length){var e=this.shift(),e=c[e];if(!e.length)return r.call(this);n.call(e,r.bind(this),f)}else d=!0,h=y=0};function b(e,t){return t<e}function w(e,t){return e<t}function E(e,t,n){for(var r=0,o=e.length-1,i=0;r<=o;){var a=Math.floor((r+o)/2);n(t,e[a])?i=r=a+1:o=(i=a)-1}return i}function O(e,t){return t<e[0]?0:t>e[e.length-1]?e.length:E(e,t,b)}function P(e,t){return t>e[0]?0:t<e[e.length-1]?e.length:E(e,t,w)}function R(e,t,n,r){c.hasOwnProperty(e)?c[e].push(t):(c[e]=[t],n.splice(r(n,e),0,e))}function x(){t&&(clearTimeout(t),t=null),p=e(u,l),t=setTimeout(function(){d&&(d=!1,r.call(p))})}T.DESTROY_IN_NEXT_FRAME=function(e,t){f=!0,R("<"+e,t,u,P),x()},T.CREATE_IN_NEXT_FRAME=function(e,t){f=!0,R(">"+e,t,l,O),x()},T.DESTROY_NODES=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n].destroy(t)},T.setAttr=function(e,t,n){null!=t&&!1!==t?e.node.setAttribute(n,!0===t?"":t):e.node.removeAttribute(n)},T.setProp=function(e,t,n){e.node[n]=t},T.createChildScope=function(e){var t={};return m(t,"__parent__",{enumerable:!1,value:e}),m(t,"__scope__",{enumerable:!1,value:e.__scope__||e}),t};var A=/=\s*'<>(.*)'|=\s*"<>(.*)"/m,S=/^\(\s*([^)]+?)\s*\)|^function.*\(\s*([^)]+?)\s*\)/m;function T(e){var t=this;(t.scope=e).element instanceof v.View.ViewNode?(t.container=e.element,t._components=Object.assign({},e.element.view._components)):(t.container=new v.View.ViewNode({tag:e.element},null,t),t.container.setInDOM(!0))}return T.getBindings=function(e){var t=null,n=[],r=[],o=!1,i=_typeof(e),a=null;return"string"===i?e.match(T.BINDING_SYNTAX_REGEX)&&(t=[e]):"function"===i?(i=e.toString().match(S))&&(t=(r=(i[1]||i[2]).split(",").map(function(e){e=e.match(A);return e?"<>"+(e[1]||e[2]):void 0})).slice(),a=e,o=!0):t=null,{propertyKeys:(n=t?t.filter(function(e){return"string"==typeof e&&0===e.indexOf("<>")}):n)?n.map(function(e){return e.replace(/<>/g,"")}):null,propertyValues:r,handler:a,isExpression:o,expressionFn:null}},T.propertyLookup=function(e,t){var n,r=(t=t.split("."))[0],t=e,o=e,i=e,a=0;if(void 0===e[r]){for(;i.__parent__;){if((n=i.__parent__).hasOwnProperty(r)){o=n;break}if(1e3<=a++)throw Error("Maximum nested property lookup has reached `"+r+"`\n"+e);i=n}if(void 0===o[r])return t}return o},T.propertyRDLookup=function(e,t){var t=t.split("."),n=t.length-1,r=e;return t.forEach(function(t,e){r=T.propertyLookup(r,t),e!==n&&(r=r[t]||r.__rd__.refs.filter(function(e){return e.shadow[t]})[0].shadow[t].data)}),r.__rd__},T.EXPRESSION_ARGS_FUNC_CACHE={},T.createArgumentsProviderFn=function(e){var t=e.join();if(T.EXPRESSION_ARGS_FUNC_CACHE[t])return T.EXPRESSION_ARGS_FUNC_CACHE[t];for(var n="return [",r=[],o=0,i=e.length;o<i;o++){var a=e[o];"string"==typeof a?0===a.indexOf("<>this.")?r.push('_prop(this.data, "'+a.replace("<>this.","")+'")'):0===a.indexOf("<>")&&r.push('_prop(scope, "'+a.replace(/<>/g,"")+'")'):r.push("_var["+o+"]")}n+=r.join(",")+"]";n=new Function("scope, _prop , _var",n);return T.EXPRESSION_ARGS_FUNC_CACHE[t]=n},T.createExpressionFunction=function(t,n,r,o,i){i[0]||(t instanceof v.View.ViewNode?i[0]=t.data:i[0]=n);var a=v.View.createArgumentsProviderFn(i);return function(){var e=[];try{e=a.call(t,n,s,i)}catch(e){console.error("Can't find the property: \n"+o.join("\n"),"\n\nIt is recommended to inject the parent object instead of its property.\n\n",n,"\n",e)}return r.apply(t,e)}},T.getExpressionFn=function(t,e,n){if(!t.isExpression)return!1;if(t.expressionFn)return t.expressionFn;try{return t.expressionFn=v.View.createExpressionFunction(e,n,t.handler,t.propertyKeys,t.propertyValues),t.expressionFn}catch(e){throw Error(e.message+"\n",t.propertyKeys)}},T.makeBinding=function(e,t,n,r,o,i){for(var a=o.propertyKeys,s=T.getExpressionFn(o,i,r),c=r,l=null,u=null,p=null,d=[],f=0,h=a.length;f<h;f++){u=null,1<(d=(l=a[f]).split(".")).length&&(l=d[0],u=d.slice(1).join(".")),!n&&r&&(n="__rd__"in r?r.__rd__:new v.View.ReactiveData(null,r,r instanceof Galaxy.Scope?r.systemId:"child")),"data"===d[0]&&r&&r.hasOwnProperty("__scope__")&&"data"===l&&(n=null);var y=void 0;if((p=null!==(p=c="this"===d[0]&&"this"===l&&i instanceof v.View.ViewNode?(l=d[1],o.propertyKeys=d.slice(2),u=null,n=new v.View.ReactiveData("data",i.data,"this"),T.propertyLookup(i.data,l)):c&&T.propertyLookup(c,l))&&"object"===_typeof(c)?c[l]:p)instanceof Object?y=new v.View.ReactiveData(l,p,n||r.__scope__.__rd__):u?y=new v.View.ReactiveData(l,null,n):n&&n.addKeyToShadow(l,"repeat"===t),null===u){if(e instanceof v.View.ViewNode||m(e,t,{set:function(e){s||n.data[l]!==e&&(n.data[l]=e)},get:function(){return s?s():n.data[l]},enumerable:!0,configurable:!0}),n&&r instanceof v.Scope&&e instanceof v.View.ViewNode&&e.localPropertyNames.has(l))return;n.addNode(e,t,l,s)}null!==u&&T.makeBinding(e,t,y,p,Object.assign({},o,{propertyKeys:[u]}),i)}},T.bindSubjectsToData=function(n,e,r,t){var o,i=g(e),a=t?v.clone(e):e;r instanceof v.Scope||(o=new v.View.ReactiveData(null,r,"BSTD"));for(var s=0,c=i.length;s<c;s++){var l=i[s],u=a[l],p=T.getBindings(u);p.propertyKeys.length&&(T.makeBinding(a,l,o,r,p,n),n)&&p.propertyKeys.forEach(function(t){try{var e=T.propertyRDLookup(r,t);n.finalize.push(function(){e.removeNode(a)})}catch(e){console.error("bindSubjectsToData -> Could not find: "+t+"\n in",r,e)}}),!u||"object"!==_typeof(u)||u instanceof Array||T.bindSubjectsToData(n,u,r)}return a},T.installPropertyForNode=function(e,t,n,r){return!(e in T.REACTIVE_BEHAVIORS)||(void 0!==(r=(e=T.NODE_BLUEPRINT_PROPERTY_MAP[e]).getConfig.call(t,r,t.blueprint[n]))&&(t.cache[n]=r),e.install.call(t,r))},T.activatePropertyForNode=function(e,t,n,r){var o=T.NODE_BLUEPRINT_PROPERTY_MAP[t]||{type:"attr"};o.key=o.key||t,void 0!==o.beforeActivate&&o.beforeActivate(e,n,t,r),e.setters[t]=T.getPropertySetterForNode(o,e,n,r)},T.getPropertySetterForNode=function(e,t,n,r){return"reactive"!==e.type&&t.virtual?T.EMPTY_CALL:void 0!==e.getSetter?e.getSetter(t,e,e,r):T.PROPERTY_SETTERS[e.type](t,e,r)},T.setPropertyForNode=function(t,e,n){var r=e+"_"+t.node.nodeType,o=T.NODE_BLUEPRINT_PROPERTY_MAP[r]||T.NODE_BLUEPRINT_PROPERTY_MAP[e];switch(o||(o={type:"prop"},!(e in t.node)&&"setAttribute"in t.node&&(o={type:"attr"}),T.NODE_BLUEPRINT_PROPERTY_MAP[r]=o),o.key=o.key||e,o.type){case"attr":case"prop":case"reactive":T.getPropertySetterForNode(o,t)(n,null);break;case"event":t.node[e]=function(e){n.call(t,e,t.data)}}},T.prototype={_components:{},components:function(e){for(var t in e){var n=e[t];if("function"!=typeof n)throw new Error("Component must be type of function: "+t);this._components[t]=n}},getComponent:function(e,t,n){var r=n,o=t;if(e)if(e in this._components){if(t.props&&"object"!==_typeof(t.props))throw new Error("The `props` must be a literal object.");if(r=T.createChildScope(n),Object.assign(r,t.props||{}),T.bindSubjectsToData(null,r,n),o=this._components[e].call(null,r,t,this),t instanceof Array)throw new Error("A component's blueprint can NOT be an array. A component must have only one root node.")}else-1===i.indexOf(e)&&console.warn("Invalid component/tag: "+e);return{blueprint:Object.assign(t,o),scopeData:r}},addTimeline:function(e){return{tag:"comment",text:"timeline",animations:e}},enterKeyframe:function(e,t,n){var r=void 0,o=n||.01;return"number"==typeof t?(o=t,t=null):"string"==typeof t&&(r=n,o=.01),{tag:"comment",text:"keyframe:enter",animations:{enter:{duration:o,timeline:t,position:r,onComplete:e}}}},leaveKeyframe:function(e,t,n){var r=void 0,o=n||.01;return"number"==typeof t?(o=t,t=null):"string"==typeof t&&(r=n,o=.01),{tag:"comment",text:"keyframe:leave",animations:{leave:{duration:o,timeline:t,position:r,onComplete:e}}}},blueprint:function(e){return this.createNode(e,this.scope,this.container,null)},clean:function(e){this.container.clean(e)},dispatchEvent:function(e){this.container.dispatchEvent(e)},createNode:function(e,t,n,r){var o,i=this,a=0,s=0;if("string"==typeof e)return(o=document.createElement("div")).innerHTML=e,(o=Array.prototype.slice.call(o.childNodes)).forEach(function(e){var t=new v.View.ViewNode({tag:e},n,i);n.registerChild(t,r),e.parentNode.removeChild(e),T.setPropertyForNode(t,"animations",{}),t.setInDOM(!0)}),o;if("function"==typeof e)return e.call(i);if(e instanceof Array){for(var c=[],a=0,s=e.length;a<s;a++)c.push(i.createNode(e[a],t,n,null));return c}if(e instanceof Object){var l,u,p=i.getComponent(e.tag,e,t),d=g(p.blueprint),f=[],h=new v.View.ViewNode(p.blueprint,n,i,p.scopeData);for(n.registerChild(h,r),a=0,s=d.length;a<s;a++){var y=d[a];!1!==T.installPropertyForNode(y,h,y,p.scopeData)&&f.push(y)}for(a=0,s=f.length;a<s;a++)"children"!==(y=f[a])&&(l=p.blueprint[y],(u=T.getBindings(l)).propertyKeys.length?T.makeBinding(h,y,null,p.scopeData,u,h):T.setPropertyForNode(h,y,l));return h.virtual||(h.setInDOM(!0),p.blueprint.children&&i.createNode(p.blueprint.children,p.scopeData,h,null)),h}throw Error("blueprint can not be null")}},T}(Galaxy),function(){Galaxy.Module.Content.registerParser("text/css",function(d){return{imports:[],source:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark(function e(o){var i,a,s,c,l,u,p;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e){if(f.hasOwnProperty(e))return f[e];var t=Object.keys(f).length,t={host:"gjs-host-"+t,content:"gjs-content-"+t};return f[e]=t}(o.systemId),t=d,r=n=void 0,n=document.implementation.createHTMLDocument(""),(r=document.createElement("style")).textContent=t,n.body.appendChild(r),p=r,a="["+i.host+"]",s=[],c=/(:host)/g,l=/([^\s+>~,]+)/g,u=function(e){return e},Array.prototype.forEach.call(p.sheet.cssRules,function(e){var t=e.selectorText.replace(l,u);e.selectorText=t.replace(c,a),s.push(e.cssText)}),p=s.join("\n"),o.export={_temp:!0,tag:"style",type:"text/css",id:o.systemId,text:p,_create:function(){var e=this.parent;e.node.setAttribute(i.host,""),function t(e,n){e instanceof Array||null==e||(e=[e]);e.forEach(function(e){"string"!=typeof e&&"comment"!==e.tag&&(e[n.content]="",e.children)&&t(e.children,n)})}(e.blueprint.children||[],i)}};case 10:case"end":return e.stop()}var t,n,r},e)}));return function(e){return t.apply(this,arguments)}}()}});var f={}}(),Galaxy.Module.Content.registerParser("default",function(n){return{imports:[],source:function(){var t=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.export=n;case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()}}),Galaxy.Module.Content.registerParser("function",function(e,t){var n=[],t=t.imports?t.imports.slice(0):[];return{imports:t=t.map(function(e){return-1!==n.indexOf(e)?null:(n.push(e),{path:e})}).filter(Boolean),source:e}}),Galaxy.Module.Content.registerParser("application/javascript",function(e){var r=[],o=[],e=e.replace(/^\/\/.*$/gm,"").replace(/Scope\.import\(['"](.*)['"]\)/gm,function(e,t){var t=t.match(/([\S]+)/gm),n=t[t.length-1];return-1===o.indexOf(n)&&(o.push(n),r.push({path:n,fresh:0===t.indexOf("new"),contentType:null})),"Scope.import('"+n+"')"});return e=(e=e.replace(/Scope\.importAsText\(['"](.*)['"]\)/gm,function(e,t){t=t.match(/([\S]+)/gm),t=t[t.length-1]+"#text";return-1===o.indexOf(t)&&(o.push(t),r.push({path:t,fresh:!0,contentType:"text/plain"})),"Scope.import('"+t+"')"})).replace(/Scope\.kill\(.*\)/gm,"return"),{imports:r,source:e}}),Galaxy.View.ArrayChange=function(t){var e=0;function n(){this.id=e++,1e8<e&&(e=0),this.init=null,this.original=null,this.returnValue=null,this.params=[],this.type="reset"}return n.prototype={getInstance:function(){var e=new t.View.ArrayChange;return e.init=this.init,e.original=this.original,e.params=this.params.slice(0),e.type=this.type,e}},n}(Galaxy),Galaxy.View.ReactiveData=function(f){var r=Array.prototype,o=["push","pop","shift","unshift","splice","sort","reverse"],i=Object.keys,h=Object.defineProperty;function y(e,t,n){n=n instanceof y?n:{id:n||"Scope",shadow:{},data:{},notify:function(){},notifyDown:function(){},sync:function(){},makeReactiveObject:function(){},addKeyToShadow:function(){}};if(this.data=t,this.id=n.id+(e?"."+e:"|Scope"),this.keyInParent=e,this.nodesMap={},this.parent=n,this.refs=[],this.shadow={},this.nodeCount=-1,this.data&&this.data.hasOwnProperty("__rd__")){this.refs=this.data.__rd__.refs;t=this.getRefById(this.id);if(t)return t.parent.isDead&&(t.parent=n),this.fixHierarchy(e,t),t;this.refs.push(this)}else{if(this.refs.push(this),null===this.data){if(this.parent.shadow[e])return this.parent.shadow[e];this.data={},this.parent.data[e]?new y(e,this.parent.data[e],this.parent):this.parent.makeReactiveObject(this.parent.data,e,!0)}if(!Object.isExtensible(this.data))return;h(this.data,"__rd__",{enumerable:!1,configurable:!0,value:this}),(this.data instanceof Galaxy.Scope||this.data.__scope__)&&(this.addKeyToShadow=f.View.EMPTY_CALL),this.data instanceof Galaxy.Scope?this.walkOnScope(this.data):this.walk(this.data)}this.fixHierarchy(e,this)}return y.prototype={get isDead(){return 0===this.nodeCount&&1===this.refs.length&&this.refs[0]===this},fixHierarchy:function(e,t){this.parent.data instanceof Array?this.keyInParent=this.parent.keyInParent:this.parent.shadow[e]=t},setData:function(e){var t,n;if(this.removeMyRef(),e instanceof Object)(this.data=e).hasOwnProperty("__rd__")?(this.data.__rd__.addRef(this),this.refs=this.data.__rd__.refs,this.data instanceof Array?(this.sync("length",this.data.length),this.sync("changes",this.data.changes)):this.syncAll()):(h(this.data,"__rd__",{enumerable:!1,configurable:!0,value:this}),this.walk(this.data)),this.setupShadowProperties((t=this.data)instanceof Array?(n=["length"],t.hasOwnProperty("changes")&&n.push("changes"),n):Object.keys(t));else for(var r in this.data={},this.shadow)this.shadow[r]instanceof y?this.shadow[r].setData(e):this.notifyDown(r)},walk:function(e){if(!(e instanceof Node))if(e instanceof Array)this.makeReactiveArray(e);else if(e instanceof Object)for(var t in e)this.makeReactiveObject(e,t)},walkOnScope:function(e){},makeReactiveObject:function(i,a,e){var t,n,s,c=i[a];"function"!=typeof c&&(t=Object.getOwnPropertyDescriptor(i,a),n=t&&t.get,s=t&&t.set,h(i,a,{get:function(){return n?n.call(i):c},set:function(e){var t=i.__rd__;if(s&&s.call(i,e),c===e)e instanceof Array?t.sync(a,e):e instanceof Object&&t.notifyDown(a);else{c=e;for(var n=0,r=t.refs.length;n<r;n++){var o=t.refs[n];o.shadow[a]&&(o.makeKeyEnum(a),o.shadow[a].setData(e))}t.notify(a,c)}},enumerable:!e,configurable:!0}),this.shadow[a]?this.shadow[a].setData(c):this.shadow[a]=null,this.sync(a,c))},makeReactiveArray:function(p){if(p.hasOwnProperty("changes"))return p.changes.init;var d=new f.View.ArrayChange;d.original=p,d.type="reset",d.params=p;for(var e=0,t=d.params.length;e<t;e++){var n=d.params[e];null!==n&&"object"===_typeof(n)&&new y(d.original.indexOf(n),n,this)}return this.sync("length",p.length),d.init=d,h(p,"changes",{enumerable:!1,configurable:!0,value:d}),o.forEach(function(l){var u=r[l];h(p,l,{value:function(){for(var t=this.__rd__,e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];var r=u.apply(this,n),o=new f.View.ArrayChange,i=o.original=p;switch(o.type=l,o.params=n,o.returnValue=r,o.init=d,l){case"push":case"reset":case"unshift":for(var a=0,s=o.params.length;a<s;a++){var c=o.params[a];null!==c&&"object"===_typeof(c)&&new y(i.indexOf(c),c,t)}break;case"pop":case"shift":null!==r&&"object"===_typeof(r)&&"__rd__"in r&&r.__rd__.removeMyRef();break;case"splice":o.params.slice(2).forEach(function(e){null!==e&&"object"===_typeof(e)&&new y(i.indexOf(e),e,t)})}return h(p,"changes",{enumerable:!1,configurable:!0,value:o}),t.notifyDown("length"),t.notifyDown("changes"),t.notify(t.keyInParent,this),r},writable:!1,configurable:!0})}),d},notify:function(e,t,n){if(this.refs===n)this.sync(e,t);else{for(var r=0,o=this.refs.length;r<o;r++){var i=this.refs[r];this!==i&&i.notify(e,t,this.refs)}this.sync(e,t);for(var a=0,s=this.refs.length;a<s;a++){var c=this.refs[a],l=c.keyInParent,u=c.parent;c.parent.notify(l,u.data[l])}}},notifyDown:function(e){for(var t=this.data[e],n=0,r=this.refs.length;n<r;n++){var o=this.refs[n];this!==o&&o.notify(e,t,this.refs)}this.sync(e,this.data[e])},sync:function(e,t){var n=this.nodesMap[e];if(f.Observer.notify(this.data,e,t),n)for(var r=0,o=n.nodes.length;r<o;r++){var i=n.nodes[r],a=n.keys[r];this.syncNode(i,a,t)}},syncAll:function(){for(var e=i(this.data),t=0,n=e.length;t<n;t++)this.sync(e[t],this.data[e[t]])},syncNode:function(e,t,n){n instanceof f.View.ArrayChange&&(n=n.getInstance()),e instanceof f.View.ViewNode?e.setters[t](n):e[t]=n,f.Observer.notify(e,t,n)},addRef:function(e){-1===this.refs.indexOf(e)&&this.refs.push(e)},removeRef:function(e){e=this.refs.indexOf(e);-1!==e&&this.refs.splice(e,1)},removeMyRef:function(){var e;this.data&&this.data.hasOwnProperty("__rd__")&&(this.data.__rd__!==this?(this.refs=[this],this.data.__rd__.removeRef(this)):1!==this.refs.length&&(this.data.__rd__.removeRef(this),e=this.refs[0],h(this.data,"__rd__",{enumerable:!1,configurable:!0,value:e}),this.refs=[this]))},getRefById:function(t){return this.refs.filter(function(e){return e.id===t})[0]},addNode:function(e,t,n,r){var o=(o=this.nodesMap[n])||(this.nodesMap[n]={keys:[],nodes:[]}),i=(-1===this.nodeCount&&(this.nodeCount=0),o.nodes.indexOf(e));-1!==i&&o.keys[i]===t||(this.nodeCount++,e instanceof f.View.ViewNode&&!e.setters[t]&&e.registerActiveProperty(t,this,r),o.keys.push(t),o.nodes.push(e),(i=this.data[n])instanceof Array&&i.changes&&h(i,"changes",{enumerable:!1,configurable:!0,value:i.changes.init}),this.data instanceof Array&&"length"!==n&&(i=i&&i.init),this.syncNode(e,t,i))},removeNode:function(e){for(var t=0,n=this.refs.length;t<n;t++)this.removeNodeFromRef(this.refs[t],e)},removeNodeFromRef:function(e,t){for(var n in e.nodesMap)for(var r,o=e.nodesMap[n];-1!==(r=o.nodes.indexOf(t));)o.nodes.splice(r,1),o.keys.splice(r,1),this.nodeCount--},addKeyToShadow:function(e,t){this.shadow[e]||(this.shadow[e]=t?new y(e,[],this):null),this.data.hasOwnProperty(e)||this.makeReactiveObject(this.data,e,!1)},setupShadowProperties:function(e){for(var t in this.shadow)this.shadow[t]instanceof y?(this.data.hasOwnProperty(t)||this.makeReactiveObject(this.data,t,!0),this.shadow[t].setData(this.data[t])):-1===e.indexOf(t)&&this.sync(t)},makeKeyEnum:function(e){var t=Object.getOwnPropertyDescriptor(this.data,e);t&&!1===t.enumerable&&(t.enumerable=!0,h(this.data,e,t))}},y}(Galaxy),Galaxy.View.ViewNode=function(e){var o=e.View,a=document.createComment(""),s=Object.defineProperty,c=Galaxy.View.EMPTY_CALL,r=e.View.CREATE_IN_NEXT_FRAME,i=e.View.DESTROY_IN_NEXT_FRAME;function l(e,t,n){e.insertBefore(t,n)}function u(e,t){e.removeChild(t)}var p={value:this,configurable:!1,enumerable:!1},d={value:null,configurable:!1,enumerable:!1},f=(Array.prototype.indexOf,Array.prototype.slice);function h(e){var t=this;e?(t.node.parentNode&&u(t.node.parentNode,t.node),t.placeholder.parentNode&&u(t.placeholder.parentNode,t.placeholder),t.garbage.forEach(function(e){h.call(e,!0)}),t.hasBeenDestroyed()):(t.placeholder.parentNode||l(t.node.parentNode,t.placeholder,t.node),t.node.parentNode&&u(t.node.parentNode,t.node),t.garbage.forEach(function(e){h.call(e,!0)})),t.garbage=[]}function y(e,t,n,r){var o,i=this;i.view=n,e.tag instanceof Node?(i.node=e.tag,e.tag=e.tag.tagName,i.node instanceof Text&&(i.populateEnterSequence=c)):i.node=(n=e.tag||"div",o=t,"svg"===n||o&&"svg"===o.blueprint.tag?document.createElementNS("http://www.w3.org/2000/svg",n):"comment"===n?document.createComment("ViewNode"):document.createElement(n)),i.blueprint=e,i.data=r instanceof Galaxy.Scope?{}:r,i.localPropertyNames=new Set,i.inputs={},i.virtual=!1,i.visible=!0,i.placeholder=(o=e.tag||"div",(n=a.cloneNode()).textContent=o,n),i.properties=new Set,i.inDOM=!1,i.setters={},i.parent=t,i.finalize=[],i.origin=!1,i.destroyOrigin=0,i.transitory=!1,i.garbage=[],i.leaveWithParent=!1,i.onLeaveComplete=h.bind(i,!0);s(i,"cache",{enumerable:!1,configurable:!1,value:{}}),i.rendered=new Promise(function(e){i.node.style?i.hasBeenRendered=function(){i.rendered.resolved=!0,i.node.style.removeProperty("display"),i.blueprint._render&&i.blueprint._render.call(i,i.data),e()}:i.hasBeenRendered=function(){i.rendered.resolved=!0,e()}}),i.rendered.resolved=!1,i.destroyed=new Promise(function(e){i.hasBeenDestroyed=function(){i.destroyed.resolved=!0,i.blueprint._destroy&&i.blueprint._destroy.call(i,i.data),e()}}),i.destroyed.resolved=!1,i.blueprint.renderConfig=Object.assign({},y.GLOBAL_RENDER_CONFIG,e.renderConfig||{}),d.value=this.node,s(i.blueprint,"node",d),p.value=this,i.node.__vn__||(s(i.node,"__vn__",p),s(i.placeholder,"__vn__",p)),i.blueprint._create&&i.blueprint._create.call(i,i.data)}return o.NODE_BLUEPRINT_PROPERTY_MAP.node={type:"attr"},o.NODE_BLUEPRINT_PROPERTY_MAP._create={type:"prop",key:"_create",getSetter:function(){return c}},o.NODE_BLUEPRINT_PROPERTY_MAP._render={type:"prop",key:"_render",getSetter:function(){return c}},o.NODE_BLUEPRINT_PROPERTY_MAP._destroy={type:"prop",key:"_destroy",getSetter:function(){return c}},o.NODE_BLUEPRINT_PROPERTY_MAP.renderConfig={type:"prop",key:"renderConfig"},y.GLOBAL_RENDER_CONFIG={applyClassListAfterRender:!1,renderDetached:!1},y.cleanReferenceNode=function(e){e instanceof Array?e.forEach(function(e){y.cleanReferenceNode(e)}):e instanceof Object&&(d.value=null,s(e,"node",d),y.cleanReferenceNode(e.children))},y.createIndex=function(e){if(e<0)return"0";if(e<10)return e+"";for(var t="9",n=e-10;10<=n;)t+="9",n-=10;return t+n},y.prototype={onLeaveComplete:null,dump:function(){for(var e=this.parent,t=this.garbage;e.transitory&&(e.blueprint.hasOwnProperty("if")&&!this.blueprint.hasOwnProperty("if")&&(t=e.garbage),e.parent)&&e.parent.transitory;)e=e.parent;t.push(this),this.garbage=[]},query:function(e){return this.node.querySelector(e)},dispatchEvent:function(e){this.node.dispatchEvent(e)},cloneBlueprint:function(){var e=Object.assign({},this.blueprint);return y.cleanReferenceNode(e),s(e,"mother",{value:this.blueprint,writable:!1,enumerable:!1,configurable:!1}),e},virtualize:function(){this.placeholder.nodeValue=JSON.stringify(this.blueprint,function(e,t){return"children"===e?"<children>":"animations"===e?"<animations>":t},2),this.virtual=!0,this.setInDOM(!1)},populateEnterSequence:function(){this.node.style.display=null},populateLeaveSequence:c,populateHideSequence:function(){this.node.style.display="none"},setInDOM:function(e){var t,n=this;n.blueprint.renderConfig.renderDetached?(n.blueprint.renderConfig.renderDetached=!1,r(n.index,function(e){n.hasBeenRendered(),e()})):(n.inDOM=e,n.virtual||(e?(n.node.style&&n.node.style.setProperty("display","none"),n.node.parentNode||l(n.placeholder.parentNode,n.node,n.placeholder.nextSibling),n.placeholder.parentNode&&u(n.placeholder.parentNode,n.placeholder),r(n.index,function(e){n.hasBeenRendered(),n.populateEnterSequence(),e()})):!e&&n.node.parentNode&&(n.origin=!0,n.transitory=!0,t=n.populateLeaveSequence,e=n.getChildNodes(),n.prepareLeaveSequence(n.hasAnimation(e),e),i(n.index,function(e){n.populateLeaveSequence(h.bind(n,!1)),n.origin=!1,n.transitory=!1,n.populateLeaveSequence=t,e()}))))},setVisibility:function(e){var t=this;(t.visible=e)&&!t.virtual?r(t.index,function(e){t.node.style.display=null,t.populateEnterSequence(),e()}):!e&&t.node.parentNode&&(t.origin=!0,t.transitory=!0,i(t.index,function(e){t.populateHideSequence(),t.origin=!1,t.transitory=!1,e()}))},registerChild:function(e,t){this.node.insertBefore(e.placeholder,t)},createNode:function(e,t){this.view.createNode(e,t,this)},registerActiveProperty:function(e,t,n){this.properties.add(t),o.activatePropertyForNode(this,e,t,n)},snapshot:function(e){var t=this.node.getBoundingClientRect(),n=this.node.cloneNode(!0),t={margin:"0",width:t.width+"px",height:t.height+" px",top:t.top+"px",left:t.left+"px",position:"fixed"};return Object.assign(n.style,t),{tag:n,style:t}},hasAnimation:function(e){if(this.populateLeaveSequence&&this.populateLeaveSequence!==c)return!0;for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.hasAnimation(r.getChildNodes()))return!0}return!1},prepareLeaveSequence:function(e,t){var n=this;if(e){if(n.populateLeaveSequence===c&&n.origin)n.populateLeaveSequence=function(){h.call(n,!1)};else if(n.populateLeaveSequence!==c&&!n.origin)for(var r=0,o=t.length;r<o;r++)t[r].onLeaveComplete=c}else n.populateLeaveSequence=function(){h.call(n,!n.origin)}},destroy:function(e){for(var t,n=this,r=(n.transitory=!0,0===n.parent.destroyOrigin?n.destroyOrigin=1:n.destroyOrigin=2,n.inDOM&&(t=n.getChildNodes(),e=e||n.hasAnimation(t),n.prepareLeaveSequence(e,t),n.clean(e,t)),n.properties.forEach(function(e){return e.removeNode(n)}),n.finalize.length),o=0;o<r;o++)n.finalize[o].call(n);i(n.index,function(e){n.populateLeaveSequence(2===n.destroyOrigin?c:n.onLeaveComplete),n.localPropertyNames.clear(),n.properties.clear(),n.finalize=[],n.inDOM=!1,n.inputs={},n.view=null,n.parent=null,Reflect.deleteProperty(n.blueprint,"node"),e()})},getChildNodes:function(){for(var e=[],t=f.call(this.node.childNodes,0),n=t.length-1;0<=n;n--){var r=t[n];"__vn__"in r&&e.push(r.__vn__)}return e},clean:function(e,t){var r=this;t=t||this.getChildNodes(),o.DESTROY_NODES(t,e),i(this.index,function(e){for(var t=r.finalize.length,n=0;n<t;n++)r.finalize[n].call(r);r.finalize=[],e()})},createNext:function(e){r(this.index,e)},get index(){var e=this.parent;if(e){var t=(this.placeholder.parentNode?this.placeholder:this.node).previousSibling;if(t){if(!t.hasOwnProperty("__index__")){for(var n=0,r=this.node;null!==(r=r.previousSibling);)++n;t.__index__=n}this.node.__index__=t.__index__+1}else this.node.__index__=0;return e.index+","+y.createIndex(this.node.__index__)}return"0"},get anchor(){return this.inDOM?this.node:this.placeholder}},y}(Galaxy),function(l){var o;function s(e,t){return e?"add:"+t:"remove:"+t}function c(e,t,n){return e[s(t,n)]}function u(e){gsap.getTweensOf(this.node).length&&gsap.killTweensOf(this.node),this.parent.transitory?this.dump():e()}function p(e){var t=this;if(e&&"string"!=typeof e){if(e.__am__)return e.__am__;var n=e.eventCallback("onComplete")||Galaxy.View.EMPTY_CALL;t.name="<user-defined>",t.timeline=e,t.timeline.__am__=this,t.timeline.eventCallback("onComplete",function(){n.call(t.timeline),t.onCompletesActions.forEach(function(e){e(t.timeline)}),t.nodes=[],t.awaits=[],t.children=[],t.onCompletesActions=[]}),t.parsePosition=function(e){return e},t.addTo=function(e){throw new Error("You can not use addTo with a custom timeline: "+e)}}else{var r=p.ANIMATIONS[e];if(r)return r.timeline.getChildren().length||r.timeline.isActive()||(r.timeline.clear(!1),r.timeline.invalidate()),r;t.name=e,t.timeline=gsap.timeline({autoRemoveChildren:!0,smoothChildTiming:!1,paused:!0,onComplete:function(){t.onCompletesActions.forEach(function(e){e(t.timeline)}),t.nodes=[],t.awaits=[],t.children=[],t.onCompletesActions=[],p.ANIMATIONS[e]=null}}),t.timeline.data={name:e},t.labelCounter=0,t.labelsMap={};r=o[e];r&&t.setupLabels(r),p.ANIMATIONS[e]=this}t.type=null,t.onCompletesActions=[],t.started=!1,t.configs={},t.children=[],t.nodes=[],t.awaits=[]}window.gsap?(l.View.NODE_BLUEPRINT_PROPERTY_MAP.animations={type:"prop",key:"animations",update:function(i,a){var t,r;!i.virtual&&a&&((t=a.enter)&&(i.populateEnterSequence=function(){if(t.withParent){if(function e(t){var n;return!!t.parent&&(!!((n=t.parent).blueprint.animations&&n.blueprint.animations.enter&&gsap.getTweensOf(n.node).length)||e(t.parent))}(this))return gsap.set(this.node,p.parseStep(this,t.to)||{});if(!this.parent.rendered.resolved)return}var e=this.node;gsap.getTweensOf(e).length&&gsap.killTweensOf(e),p.installGSAPAnimation(this,"enter",t)}),(r=a.leave)?(!t&&i.blueprint.if&&(console.warn("The following node has `if` and a `leave` animation but does NOT have a `enter` animation.\nThis can result in unexpected UI behavior.\nTry to define a `enter` animation that negates the leave animation to prevent unexpected behavior\n\n"),console.warn(i.node)),i.populateLeaveSequence=function(e){if(!1===p.parseStep(i,r.active))return u.call(i,e);var t=p.parseStep(i,r.withParent),n=(i.leaveWithParent=!0===t,this.node);if((gsap.getTweensOf(n).length&&gsap.killTweensOf(n),t)&&this.parent.transitory)return this.dump();t=n.getBoundingClientRect();if(0===t.width||0===t.height||"0"===n.style.opacity||"hidden"===n.style.visibility)return gsap.killTweensOf(n),e();p.installGSAPAnimation(this,"leave",r,e)},i.populateHideSequence=i.populateLeaveSequence.bind(i,function(){i.node.style.display="none"})):i.populateLeaveSequence=u.bind(i),i.cache.class)&&i.cache.class.observer&&i.rendered.then(function(){var e,o=i.cache.class.observer.context;for(e in o){var t=Boolean(o[e]),t=c(a,t,e);t&&gsap.set(i.node,p.parseStep(i,t.to))}i.cache.class.observer.onAll(function(e){var t=Boolean(o[e]),n=s(t,e),r=c(a,t,e);r&&(t&&!i.node.classList.contains(e)?(p.setupOnComplete(r,function(){i.node.classList.add(e)}),p.installGSAPAnimation(i,n,r)):!t&&i.node.classList.contains(e)&&(p.setupOnComplete(r,function(){i.node.classList.remove(e)}),p.installGSAPAnimation(i,n,r)))})})}},(l.View.AnimationMeta=p).ANIMATIONS={},p.TIMELINES={},p.createSimpleAnimation=function(e,t,n){n=n||l.View.EMPTY_CALL;var r,o,i,a=e.node,s=p.parseStep(e,t.from),c=p.parseStep(e,t.to),e=p.parseStep(e,t.duration)||0;return c&&((c=Object.assign({},c)).duration=e,c.onComplete=n,t.onComplete)&&(r=t.onComplete,c.onComplete=function(){r(),n()}),s&&c?gsap.fromTo(a,s,c):s?((s=Object.assign({},s)).duration=e,s.onComplete=n,t.onComplete&&(o=t.onComplete,s.onComplete=function(){o(),n()}),gsap.from(a,s)):c?gsap.to(a,c):t.onComplete?(i=t.onComplete,gsap.to(a,{duration:e,onComplete:function(){i(),n()}})):gsap.to(a,{duration:e,onComplete:n})},p.createStep=function(e,t,n,r){e=Object.assign({},e);return e.callbackScope=r,e.onStart=t,e.onComplete=n,e},p.parseStep=function(e,t){return t instanceof Function?t.call(e,e.data):t},p.setupOnComplete=function(e,t){var n;e.onComplete?(n=e.onComplete,e.onComplete=function(){n(),t()}):e.onComplete=function(){t()}},p.installGSAPAnimation=function(e,t,n,r){var o=p.parseStep(e,n.from),i=p.parseStep(e,n.to),a=("leave"!==t&&i&&(i.clearProps=i.hasOwnProperty("clearProps")?i.clearProps:"all"),0!==t.indexOf("add:")&&0!==t.indexOf("remove:")||(i=Object.assign(i||{},{overwrite:"none"})),Object.assign({},n)),n=(a.from=o,a.to=i,a.timeline),o=null;if(n=a.timeline instanceof Function?a.timeline.call(e):n){var s=new p(n);if(a.addTo&&-1===(o=new p(a.addTo)).timeline.getChildren(!1).indexOf(s.timeline)&&o.timeline.add(s.timeline,o.parsePosition(a.positionInParent)),a.await&&-1===s.awaits.indexOf(a.await)){for(var c=s.timeline;c.parent!==gsap.globalTimeline;){if(!c.parent)return;c=c.parent}s.awaits.push(a.await);var i=c.addPause(a.position,function(){if(e.transitory||e.destroyed.resolved)return c.resume();a.await.then(l)}).recent(),l=function(e){var t=s.awaits.indexOf(a.await);-1!==t&&(s.awaits.splice(t,1),e._initted?c.resume():-1!==c.getChildren(!1).indexOf(e)&&c.remove(e))}.bind(null,i);e.finalize.push(function(){-1!==s.awaits.indexOf(a.await)&&e.node.style&&(e.node.style.display="none"),l()})}s.type&&s.type!==t&&a.position&&-1!==a.position.indexOf("=")&&(a.position=a.startPosition),s.type=t,s.add(e,a,r),a.addTo&&o&&(o.started||(o.started=!0,o.timeline.resume()))}else p.createSimpleAnimation(e,a,r)},o={},l.setupTimeline=function(e,t){o[e]=t;e=p.ANIMATIONS[e];e&&e.setupLabels(t)},Galaxy.TIMELINE_SETUP_MAP=o,p.prototype={setupLabels:function(e){for(var t in e){var n="label_"+this.labelCounter++,r=e[t];this.labelsMap[t]=n,this.timeline.addLabel(n,"number"==typeof r?"+="+r:r)}},parsePosition:function(e){var e=this.labelsMap[e]||e,t=null;return e&&(-1!==e.indexOf("+=")?t=e.split("+=")[0]:-1!==e.indexOf("-=")&&(t=e.split("-=")[0])),e=t&&"<"!==t&&">"!==t?e.replace(t,this.labelsMap[t]):e},addOnComplete:function(e){this.onCompletesActions.push(e)},addTo:function(e,t){-1===e.timeline.getChildren(!1).indexOf(this.timeline)&&e.timeline.add(this.timeline,e.parsePosition(t))},add:function(e,t,n){var r,o=this,i=null,a=t.duration;if(a instanceof Function&&(a=t.duration.call(e)),i=t.from&&t.to?((s=p.createStep(t.to,t.onStart,t.onComplete,e)).duration=a||0,gsap.fromTo(e.node,t.from,s)):t.from?((s=p.createStep(t.from,t.onStart,t.onComplete,e)).duration=a||0,gsap.from(e.node,s)):((s=p.createStep(t.to,t.onStart,t.onComplete,e)).duration=a||0,gsap.to(e.node,s)),n){if(i.vars.onComplete)return r=i.vars.onComplete,function(){r.apply(this,arguments),n()};i.vars.onComplete=n}var a=this.parsePosition(t.position),e=o.timeline.getChildren(!1),s=e[0];0===e.length?o.timeline.add(i,a&&-1===a.indexOf("=")?a:null):(1!==e.length||s.hasOwnProperty("timeline")||0!==s.getChildren(!1).length||o.timeline.clear(!1),o.timeline.add(i,a)),o.started||"<user-defined>"===o.name||(o.started=!0,o.timeline.resume())}}):(l.setupTimeline=function(){},l.View.NODE_BLUEPRINT_PROPERTY_MAP.animations={type:"prop",key:"animations",update:function(e,t){t.enter&&t.enter.onComplete&&(e.populateEnterSequence=t.enter.onComplete),e.populateLeaveSequence=function(e){e()}}},window.gsap={to:function(a,s){return requestAnimationFrame(function(){var e=(a="string"==typeof a?document.querySelector(a):a).style;if(e)for(var t=Object.keys(s),n=0,r=t.length;n<r;n++){var o=t[n],i=s[o];switch(o){case"duration":case"ease":break;case"opacity":case"z-index":e.setProperty(o,i);break;case"scrollTo":a.scrollTop="string"==typeof i.y?document.querySelector(i.y).offsetTop:i.y,a.scrollLeft="string"==typeof i.x?document.querySelector(i.x).offsetLeft:i.x;break;default:e.setProperty(o,"number"==typeof i&&0!==i?i+"px":i)}}else Object.assign(a,s)})}},console.info("%cPlease load GSAP - GreenSock in order to activate animations","color: yellowgreen; font-weight: bold;"),console.info("%cYou can implement most common animations by loading the following resources","color: yellowgreen;"),console.info("https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/gsap.min.js"),console.info("https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/ScrollToPlugin.min.js"),console.info("https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.1/EasePack.min.js\n\n"))}(Galaxy),function(a){a.View.NODE_BLUEPRINT_PROPERTY_MAP.checked={type:"prop",key:"checked",beforeActivate:function(e,n,t,r){if(n){if(r&&"input"===e.blueprint.tag)throw new Error("input.checked property does not support binding expressions because it must be able to change its data.\nIt uses its bound value as its `model` and expressions can not be used as model.\n");var o=a.View.getBindings(e.blueprint.checked).propertyKeys[0].split(".").pop(),i=e.node;i.addEventListener("change",function(){var e,t;/\[\]$/.test(i.name)&&"radio"!==i.type?(e=n.data[o],t=!i.hasAttribute("value")||i.value,e instanceof Array?-1===e.indexOf(t)?e.push(t):e.splice(e.indexOf(t),1):n.data[o]=[t]):i.hasAttribute("value")?n.data[o]=i.checked?i.value:null:n.data[o]=i.checked})}},update:function(e,t){var n=e.node;e.rendered.then(function(){if(/\[\]$/.test(n.name)){if("radio"===n.type)return console.error("Inputs with type `radio` can not provide array as a value."),console.warn("Read about radio input at: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/radio");var e=!n.hasAttribute("value")||n.value;t instanceof Array?n.checked=-1!==t.indexOf(e):n.checked=t===e}else n.hasAttribute("value")?n.checked=t===n.value:n.checked=t})}}}(Galaxy),function(a){function s(t,e){var n=t.node.className||[],r=function(e){if("string"==typeof e)return[e];if(e instanceof Array)return e;if(null!==e&&"object"===_typeof(e)){var t,n=[];for(t in e)e.hasOwnProperty(t)&&e[t]&&n.push(t);return n}}(e);JSON.stringify(n)!==JSON.stringify(r)&&a.View.CREATE_IN_NEXT_FRAME(t.index,function(e){t.node.className=r.join(" "),e()})}a.View.REACTIVE_BEHAVIORS.class=!0,a.View.NODE_BLUEPRINT_PROPERTY_MAP.class={type:"reactive",key:"class",getConfig:function(e,t){return{scope:e,subjects:t,reactiveClasses:null,observer:null}},install:function(e){var t,n,r,o,i;return this.virtual||null===e.subjects||e.subjects instanceof Array||"object"!==_typeof(e.subjects)||(n=e.reactiveClasses=a.View.bindSubjectsToData(t=this,e.subjects,e.scope,!0),r=e.observer=new a.Observer(n),o=t.blueprint.animations||{},i=!!window.gsap.config,t.blueprint.renderConfig.applyClassListAfterRender?t.rendered.then(function(){r.onAll(function(e){i&&(o["add:"+e]||o["remove:"+e])||s(t,n)})}):r.onAll(function(e){i&&(o["add:"+e]||o["remove:"+e])||s(t,n)})),!0},update:function(e,t,n){var r,o;if(!this.virtual)return o=(r=this).node,"string"==typeof(t=n?n():t)||null==t?o.className=t:t instanceof Array?o.className=t.join(" "):(e.subjects===t&&(t=e.reactiveClasses),void(r.blueprint.renderConfig.applyClassListAfterRender?r.rendered.then(function(){s(r,t)}):s(r,t)))}}}(Galaxy),function(r){r.View.NODE_BLUEPRINT_PROPERTY_MAP.disabled={type:"attr",key:"disabled",update:function(t,n,e){t.rendered.then(function(){var e;"form"===t.blueprint.tag.toLowerCase()&&(e=t.node.querySelectorAll("input, textarea, select, button"),n?Array.prototype.forEach.call(e,function(e){return e.setAttribute("disabled","")}):Array.prototype.forEach.call(e,function(e){return e.removeAttribute("disabled")}))}),r.View.setAttr(t,n?"":null,e)}}}(Galaxy),function(e){e.View.REACTIVE_BEHAVIORS.if=!0,e.View.NODE_BLUEPRINT_PROPERTY_MAP.if={type:"reactive",key:"if",getConfig:function(){return{throttleId:0}},install:function(e){return!0},update:function(e,t,n){var r=this;0!==e.throttleId&&(window.clearTimeout(e.throttleId),e.throttleId=0),n&&(t=n()),t=Boolean(t),this.rendered.resolved||t||(this.blueprint.renderConfig.renderDetached=!0),e.throttleId=setTimeout(function(){r.rendered.then(function(){r.inDOM!==t&&r.setInDOM(t)})})}}}(Galaxy),function(s){s.View.REACTIVE_BEHAVIORS.module=!0,s.View.NODE_BLUEPRINT_PROPERTY_MAP.module={type:"reactive",key:"module",getConfig:function(e){return{module:null,moduleMeta:null,scope:e}},install:function(){return!0},update:function(t,n,e){var a=this;if(void 0!==(n=e?e():n))return"object"!==_typeof(n)?console.error("module property only accept objects as value",n):void(n&&t.moduleMeta&&n.path===t.moduleMeta.path||(n&&n===t.moduleMeta||s.View.DESTROY_IN_NEXT_FRAME(a.index,function(e){for(var t=a,n=t.getChildNodes(),r=0,o=n.length;r<o;r++){var i=n[r];i.populateLeaveSequence===c&&(i.populateLeaveSequence=function(e){e()})}t.clean(!0),e()}),!a.virtual&&n&&n.path&&n!==t.moduleMeta&&s.View.CREATE_IN_NEXT_FRAME(a.index,function(e){!function(t,n,e,r){n.module&&n.module.destroy();var o=new s.GalaxyURI(e.path),i=n.scope,a=n.scope;for(;i;){if(a instanceof s.Scope||(a=new s.Scope({systemId:"repeat-item",path:n.scope.__parent__.uri.parsedURL,parentScope:n.scope.__parent__})),o.parsedURL===a.uri.parsedURL)return console.error("Circular module loading detected and stopped. \n"+a.uri.parsedURL+" tries to load itself.");i=i.parentScope}a.load(e,{element:t}).then(function(e){n.module=e,t.node.setAttribute("module",e.path),e.start(),r()}).catch(function(e){console.error(e),r()})}.call(null,a,t,n,e)}),t.moduleMeta=n))}};var c=Galaxy.View.EMPTY_CALL}(Galaxy),Galaxy.View.NODE_BLUEPRINT_PROPERTY_MAP.on={type:"prop",key:"on",update:function(n,r){if(null!==r&&"object"===_typeof(r))for(var e in r)!function(t){var e;r.hasOwnProperty(t)&&(n.node.addEventListener(t,e=function(e){return r[t].call(n,e,n.data)},!1),n.finalize.push(function(){n.node.removeEventListener(t,e,!1)}))}(e)}},function(M){var V=M.View,f=M.clone,D=M.View.DESTROY_NODES;function G(e,t,n,r,o,i,a,s,c,l,u,p){n=n,d=r,o=o,(n=V.createChildScope(n))[d]=o;var d=n,o=f(t),n=(d[i]=a,e.createNode(o,d,s,c));l.call(u,n,p[a],d[r])}V.REACTIVE_BEHAVIORS.repeat=!0,V.NODE_BLUEPRINT_PROPERTY_MAP.repeat={type:"reactive",key:"repeat",getConfig:function(e,t){return this.virtualize(),{changeId:null,previousActionId:null,nodes:[],data:t.data,as:t.as,indexAs:t.indexAs||"_index",oldChanges:{},positions:[],trackMap:[],scope:e,trackBy:t.trackBy,onComplete:t.onComplete}},install:function(n){var r=this;if(n.data){if("data"===n.as)throw new Error("`data` is an invalid value for repeat.as property. Please choose a different value.`");r.localPropertyNames.add(n.as),r.localPropertyNames.add(n.indexAs);var e,t=V.getBindings(n.data);t.propertyKeys.length?(V.makeBinding(r,"repeat",void 0,n.scope,t,r),t.propertyKeys.forEach(function(t){try{var e=V.propertyRDLookup(n.scope,t);r.finalize.push(function(){e.removeNode(r)})}catch(e){console.error("Could not find: "+t+"\n",e)}})):n.data instanceof Array&&(t=r.setters.repeat=V.getPropertySetterForNode(M.View.NODE_BLUEPRINT_PROPERTY_MAP.repeat,r,n.data,null,n.scope),(e=new M.View.ArrayChange).params=n.data,n.data.changes=e,t(n.data))}return!1},update:function(e,t,n){var r=null;if(n){if(null==(t=n()))return;r=t instanceof M.View.ArrayChange?t:t instanceof Array?((n=new M.View.ArrayChange).original=t,n.type="reset",(n.params=t).changes=n):t instanceof Object?(n=Object.entries(t).map(function(e){e=_slicedToArray(e,2);return{key:e[0],value:e[1]}}),(i=new M.View.ArrayChange).original=n,i.type="reset",i.params=n,t.changes=i):{type:"reset",params:[]}}else t instanceof M.View.ArrayChange?r=t:t instanceof Array?r=t.changes:t instanceof Object&&(n=Object.entries(t).map(function(e){e=_slicedToArray(e,2);return{key:e[0],value:e[1]}}),(r=new M.View.ArrayChange).original=n,r.type="reset",r.params=n);if(r&&!(r instanceof M.View.ArrayChange))return console.warn("%crepeat %cdata is not a type of ArrayChange\ndata: "+e.data+"\n%ctry '"+e.data+".changes'\n","color:black;font-weight:bold",null,"color:green;font-weight:bold");r&&"string"!=typeof r||(r={id:0,type:"reset",params:[]});if(r.id!==e.changeId){e.changeId=r.id,e.oldChanges=r;var o,i=this,a=e,t=function(e,n,t){var r,e=e.blueprint.animations&&e.blueprint.animations.leave,o=n.trackBy;{var i,a;if(o&&"reset"===t.type)return!0===o?r=t.params.map(function(e){return e}):"string"==typeof o&&(r=t.params.map(function(e){return e[o]})),i=[],n.trackMap=n.trackMap.filter(function(e,t){return-1!==r.indexOf(e)||!n.nodes[t]||(i.push(n.nodes[t]),!1)}),(a=new M.View.ArrayChange).init=t.init,a.type=t.type,a.original=t.original,a.params=t.params,a.__rd__=t.__rd__,"reset"===a.type&&a.params.length&&(a.type="push"),n.nodes=n.nodes.filter(function(e){return-1===i.indexOf(e)}),D(i,e),a;if("reset"===t.type)return a=n.nodes.slice(0),n.nodes=[],D(a,e),(a=Object.assign({},t)).type="push",a}return t}(this,e,r),s=i.parent,c=[],l=[],u=a.scope,p=a.trackMap,d=a.as,f=a.indexAs,h=a.nodes,y=a.trackBy,v=i.cloneBlueprint(),m=(Reflect.deleteProperty(v,"repeat"),(h.length?h[h.length-1].anchor:i.placeholder).nextSibling),n=[];if(o=!0===y?function(e,t,n){p.push(n),this.push(e)}:function(e,t,n){p.push(n[a.trackBy]),this.push(e)},"push"===t.type)n=t.params;else if("unshift"===t.type)m=h[0]?h[0].anchor:m,n=t.params,o=!0===y?function(e,t,n){p.unshift(n),this.unshift(e)}:function(e,t,n){p.unshift(n[y]),this.unshift(e)};else if("splice"===t.type){var g=t.params.slice(0,2),_=Array.prototype.splice.apply(h,g),b=(D(_.reverse(),i.blueprint.animations&&i.blueprint.animations.leave),Array.prototype.splice.apply(p,g),t.params[0]);n=t.params.slice(2);for(var w=0,E=n.length;w<E;w++){var O=w+b;c.push(O),l.push(h[O]?h[O].anchor:m)}o=!0===y?function(e,t,n){p.splice(t,0,n),this.splice(t,0,e)}:function(e,t,n){p.splice(t,0,n[y]),this.splice(t,0,e)}}else"pop"===t.type?((_=h.pop())&&_.destroy(),p.pop()):"shift"===t.type?((g=h.shift())&&g.destroy(),p.shift()):"sort"!==t.type&&"reverse"!==t.type||(h.forEach(function(e){e.destroy()}),a.nodes=[],n=t.original,Array.prototype[t.type].call(p));var P=i.view;if(n instanceof Array){var R=n.slice(0);if(y)if(!0===y)for(var x=0,A=n.length;x<A;x++){var S=R[x],T=p.indexOf(S);-1!==T?a.nodes[T].data._index=T:G(P,v,u,d,S,f,x,s,l[x]||m,o,h,c)}else for(var N=0,C=n.length;N<C;N++){var j=R[N],L=p.indexOf(j[y]);-1!==L?a.nodes[L].data._index=L:G(P,v,u,d,j,f,N,s,l[N]||m,o,h,c)}else for(var k=0,I=n.length;k<I;k++)G(P,v,u,d,R[k],f,k,s,l[k]||m,o,h,c);a.onComplete&&V.CREATE_IN_NEXT_FRAME(i.index,function(e){a.onComplete(h),e()})}}}}}(Galaxy),function(o){o.View.NODE_BLUEPRINT_PROPERTY_MAP.selected={type:"prop",key:"selected",beforeActivate:function(e,t,n,r){if(t){if(r&&"select"===e.blueprint.tag)throw new Error("select.selected property does not support binding expressions because it must be able to change its data.\nIt uses its bound value as its `model` and expressions can not be used as model.\n");"select"===e.blueprint.tag&&(o.View.getBindings(e.blueprint.selected).propertyKeys[0].split(".").pop(),e.node.addEventListener("change",function(e){}))}},update:function(e,t){var n=e.node;e.rendered.then(function(){n.value!==t&&("select"===e.blueprint.tag?n.value=t:t?n.setAttribute("selected"):n.removeAttribute("selected"))})}}}(Galaxy),function(r){function o(n,r){if(r instanceof Object)for(var e in r)!function(t){var e=r[t];e instanceof Promise?e.then(function(e){n.style[t]=e}):n.style[t]="function"==typeof e?e.call(n.__vn__,n.__vn__.data):e}(e);else n.style=r}r.View.REACTIVE_BEHAVIORS.style=!0,r.View.NODE_BLUEPRINT_PROPERTY_MAP.style_3={type:"prop",key:"style"},r.View.NODE_BLUEPRINT_PROPERTY_MAP.style_8={type:"prop",key:"style"},r.View.NODE_BLUEPRINT_PROPERTY_MAP.style={type:"reactive",key:"style",getConfig:function(e,t){return{scope:e,subjects:t,reactiveStyle:null}},install:function(e){var t,n;return this.virtual||null===e.subjects||e.subjects instanceof Array||"object"!==_typeof(e.subjects)||(t=this.node,n=e.reactiveStyle=r.View.bindSubjectsToData(this,e.subjects,e.scope,!0),new r.Observer(n).onAll(function(){o(t,n)})),!0},update:function(e,t,n){if(!this.virtual){var r=this.node;if("string"==typeof(t=n?n():t))return r.style=t;if(t instanceof Array)return r.style=t.join(";");if(t instanceof Promise)t.then(function(e){o(r,e)});else if(null===t)return r.removeAttribute("style");e.subjects===t&&(t=e.reactiveStyle),o(r,t)}}}}(Galaxy),function(e){e.View.NODE_BLUEPRINT_PROPERTY_MAP.text_3={type:"prop",key:"nodeValue"},e.View.NODE_BLUEPRINT_PROPERTY_MAP.text_8={type:"prop",key:"nodeValue"},e.View.NODE_BLUEPRINT_PROPERTY_MAP.text={type:"prop",key:"text",update:function(e,t){var t=null==t?"":t,e=(t instanceof Object&&(t=JSON.stringify(t)),e.node),n=e["<>text"];n?n.nodeValue=t:(n=e["<>text"]=document.createTextNode(t),e.insertBefore(n,e.firstChild))}}}(Galaxy),function(u){function p(t,n){return function(e){t.data[n]=e.target.value}}u.View.NODE_BLUEPRINT_PROPERTY_MAP["value.config"]={type:"none"},u.View.NODE_BLUEPRINT_PROPERTY_MAP.value={type:"prop",key:"value",beforeActivate:function(t,n,e,r){var o=t.node;if(n){if(r)throw new Error("input.value property does not support binding expressions because it must be able to change its data.\nIt uses its bound value as its `model` and expressions can not be used as model.\n");var i,a,s,c,l=u.View.getBindings(t.blueprint.value).propertyKeys[0].split(".").pop();"SELECT"===o.tagName?((i=new MutationObserver(function(e){t.rendered.then(function(){o.value=n.data[l]})})).observe(o,{childList:!0}),t.finalize.push(function(){i.disconnect()}),o.addEventListener("change",p(n,l))):"number"===o.type||"range"===o.type?o.addEventListener("input",(a=o,s=n,c=l,function(){s.data[c]=a.value?Number(a.value):null})):o.addEventListener("input",p(n,l))}},update:function(e,t){t===e.node.value&&e.node.value||(e.node.value=null==t?"":t)}}}(Galaxy),function(e){e.View.REACTIVE_BEHAVIORS.visible=!0,e.View.NODE_BLUEPRINT_PROPERTY_MAP.visible={type:"reactive",key:"visible",getConfig:function(){return{throttleId:0}},install:function(){return!0},update:function(e,t,n){var r=this;0!==e.throttleId&&(window.clearTimeout(e.throttleId),e.throttleId=0),n&&(t=n()),e.throttleId=window.setTimeout(function(){r.rendered.then(function(){r.visible!==t&&r.setVisibility(t)})})}}}(Galaxy),function(a){a.View.PROPERTY_SETTERS.attr=function(n,e,t){function r(e){var t;e instanceof Promise?e.then(t=function(e){i(n,e,o)}).catch(t):e instanceof Function?(t=e.call(n,n.data),i(n,t,o)):i(n,e,o)}var o=e.key,i=e.update||a.View.setAttr;return t?function(){var e=t();r(e)}:r}}(Galaxy),function(a){a.View.PROPERTY_SETTERS.prop=function(n,e,t){function r(e){var t;e instanceof Promise?e.then(t=function(e){i(n,e,o)}).catch(t):e instanceof Function?(t=e.call(n,n.data),i(n,t,o)):i(n,e,o)}var o=e.key,i=e.update||a.View.setProp;return t?function(){var e=t();r(e)}:r}}(Galaxy),Galaxy.View.PROPERTY_SETTERS.reactive=function(e,t,n,r){var o,i,a,s,c=t.key,t=t.update,c=e.cache[c];return o=c,i=n,a=r,s=t.bind(e),function(e){return s(o,e,i,a)}},Galaxy.registerAddOnProvider("galaxy/router",function(t,n){return{create:function(){var e=new Galaxy.Router(t,n);return"root"!==n.systemId&&t.on("module.destroy",function(){return e.destroy()}),t.router=e.data,e},start:function(){}}}),Galaxy.Router=function(l){function o(e,t){var n=this;if(n.config={baseURL:o.BASE_URL},n.scope=e,n.module=t,n.parentRouterScope=e.parentScope,n.parentRouterScope&&(!n.parentRouterScope.router||!n.parentRouterScope.router.activeRoute)){for(var r=n.parentRouterScope;!r.router||!r.router.activeRoute;)r=r.parentScope;n.config.baseURL=r.router.activePath,n.parentRouterScope=null}n.path=n.parentRouterScope&&n.parentRouterScope.router?n.parentRouterScope.router.activeRoute.path:"/",n.fullPath="/"===this.config.baseURL?this.path:this.config.baseURL+this.path,n.parentRoute=null,n.oldURL="",n.resolvedRouteValue=null,n.resolvedDynamicRouteValue=null,n.routesMap=null,n.data={routes:[],activeRoute:null,activePath:null,activeModule:null,viewports:{main:null},parameters:n.parentRouterScope&&n.parentRouterScope.router?n.parentRouterScope.router.parameters:{}},n.onTransitionFn=Galaxy.View.EMPTY_CALL,n.viewports={main:{tag:"div",module:"<>router.activeModule"}},Object.defineProperty(this,"urlParts",{get:function(){return n.oldURL.split("/").slice(1)},enumerable:!0}),"root"===t.id&&o.currentPath.update()}return o.PARAMETER_NAME_REGEX=new RegExp(/[:*](\w+)/g),o.PARAMETER_NAME_REPLACEMENT="([^/]+)",o.BASE_URL="/",o.currentPath={handlers:[],subscribe:function(e){this.handlers.push(e),e(location.pathname)},update:function(){this.handlers.forEach(function(e){e(location.pathname)})}},o.mainListener=function(e){o.currentPath.update()},o.prepareRoute=function(e,t,n){var r;return e instanceof Array?(r=e.map(function(e){return o.prepareRoute(e,t,n)}),t&&(t.activeRoute.children=r),r):_objectSpread(_objectSpread({},e),{},{fullPath:n+e.path,active:!1,hidden:e.hidden||Boolean(e.redirectTo)||!1,viewports:e.viewports||{},parent:t?t.activeRoute:null,children:e.children||[]})},window.addEventListener("popstate",o.mainListener),o.prototype={setup:function(e){var t=this;return this.routes=o.prepareRoute(e,this.parentRouterScope?this.parentRouterScope.router:null,"/"===this.fullPath?"":this.fullPath),this.parentRouterScope&&this.parentRouterScope.router&&(this.parentRoute=this.parentRouterScope.router.activeRoute),this.routes.forEach(function(e){(e.viewports?Object.keys(e.viewports):[]).forEach(function(e){"main"===e||t.viewports[e]||(t.viewports[e]={tag:"div",module:"<>router.viewports."+e})})}),this.data.routes=this.routes,this},start:function(){this.listener=this.detect.bind(this),window.addEventListener("popstate",this.listener),this.detect()},navigateToPath:function(e,t){if(0!==e.indexOf("/"))throw new Error("Path argument is not starting with a `/`\nplease use `/"+e+"` instead of `"+e+"`");0!==e.indexOf(this.config.baseURL)&&(e=this.config.baseURL+e),window.location.pathname!==e&&setTimeout(function(){t?history.replaceState({},"",e):history.pushState({},"",e),dispatchEvent(new PopStateEvent("popstate",{state:{}}))})},navigate:function(e,t){0!==e.indexOf(this.path)&&(e=this.path+e),this.navigateToPath(e,t)},navigateToRoute:function(e,t){var n=e.path;e.parent&&(n=e.parent.path+e.path),this.navigate(n,t)},notFound:function(){},normalizeHash:function(e){if(0===e.indexOf("#!/"))throw new Error("Please use `#/` instead of `#!/` for you hash");var t=e;return 0!==e.indexOf("#/")&&(0!==e.indexOf("/")?t="/"+e:0===e.indexOf("#")&&(t=e.split("#").join("#/"))),t.replace(this.fullPath,"/").replace("//","/")||"/"},onTransition:function(e){return this.onTransitionFn=e,this},findMatchRoute:function(e,t,n){for(var r=this,o=0,i=r.normalizeHash(t),a=e.map(function(e){return e.path}),s=r.extractDynamicRoutes(a),c=0,l=s.length;c<l;c++){var u=s[c],p=u.paramFinderExpression.exec(i);if(p){o++;p=r.createParamValueMap(u.paramNames,p.slice(1));if(r.resolvedDynamicRouteValue===t)return Object.assign(r.data.parameters,p);r.resolvedDynamicRouteValue=t,r.resolvedRouteValue=null;var d=a.indexOf(u.id),u=u.id.split("/").filter(function(e){return 0!==e.indexOf(":")}).join("/"),u=t.replace(u,"").split("/");if(!r.callRoute(e[d],u.join("/"),p,n))return}}var f,h=e.filter(function(e){return-1===s.indexOf(e)&&0===i.indexOf(e.path)}).reduce(function(e,t){return e.path.length>t.path.length?e:t});if(h)return f=i.slice(0,h.path.length),r.resolvedRouteValue===f?Object.assign(r.data.parameters,r.createClearParameters()):(r.resolvedDynamicRouteValue=null,r.resolvedRouteValue=f,h.redirectTo?this.navigate(h.redirectTo,!0):(o++,r.callRoute(h,i,r.createClearParameters(),n)));0===o&&console.warn("No associated route has been found",t)},callRoute:function(e,t,n,r){var o,i=this,a=this.data.activeRoute,s=this.data.activePath;if(this.onTransitionFn.call(this,s,e.path,a,e),e.redirectTo||(a&&(a.active=!1,"function"==typeof a.onLeave)&&a.onLeave.call(null,s,e.path,a,e),e.active=!0),"function"==typeof e.onEnter&&e.onEnter.call(null,s,e.path,a,e),this.data.activeRoute=e,this.data.activePath=e.path,"function"==typeof e.handle)return e.handle.call(this,n,r);for(o in this.data.viewports){var c=e.viewports[o]||null;"string"==typeof c&&(c={path:c}),"main"===o&&(this.data.activeModule=c),this.data.viewports[o]=c}return l.View.CREATE_IN_NEXT_FRAME(l.View.GET_MAX_INDEX(),function(e){Object.assign(i.data.parameters,n),e()}),!1},createClearParameters:function(){var t={};return Object.keys(this.data.parameters).forEach(function(e){return t[e]=void 0}),t},extractDynamicRoutes:function(e){return e.map(function(e){for(var t=[],n=o.PARAMETER_NAME_REGEX.exec(e);n;)t.push(n[1]),n=o.PARAMETER_NAME_REGEX.exec(e);return t.length?{id:e,paramNames:t,paramFinderExpression:new RegExp(e.replace(o.PARAMETER_NAME_REGEX,o.PARAMETER_NAME_REPLACEMENT))}:null}).filter(Boolean)},createParamValueMap:function(e,n){var r={};return e.forEach(function(e,t){r[e]=n[t]}),r},detect:function(){var e=window.location.pathname,e=e?"/"!==e.substring(-1)?e+"/":e:"/",t="/"===this.config.baseURL?this.path:this.config.baseURL+this.path;0===e.indexOf(t)&&e!==this.oldURL&&(this.oldURL=e,this.findMatchRoute(this.routes,e,{}))},getURLParts:function(){return this.oldURL.split("/").slice(1)},destroy:function(){this.parentRoute&&(this.parentRoute.children=[]),window.removeEventListener("popstate",this.listener)}},o}(Galaxy),Galaxy.registerAddOnProvider("galaxy/view",function(e){return{create:function(){return new Galaxy.View(e)},start:function(){}}});