<div class="card big" ui-view="main-content">
  <img class="banner" src='modules/api/images/tools.jpg' alt='tools'/>

  <section class="content">
    <h1>API</h1>
  </section>

  <section class="content">
    <h3>
      Classes
    </h3>
    <h2>
      Galaxy.GalaxySystem
    </h2>
    <p>
      The main class of the GalaxyJS, <code>window.galaxy</code> is an instance of this class.
    </p>
  </section>

  <section class="content">
    <h2>
      Galaxy.GalaxyModule
    </h2>
    <p>
      GalaxyModule is container of add-ons. You can load a module via <code>Scope.load</code>.
    </p>
    <blockquote>
      <p>
        You can use <code>Galaxy.load</code> to load module without any parent scope.
      </p>
    </blockquote>
    <pre class="prettyprint lang-js">
 Scope.load({
    // id should be equals to the url # value
    // otherwise the module will be not registered
    id: 'my-module' 
    url: 'path/to/module.html'
  }, function (module) {
    // Set the html content of the module as the content of the element
    var element = document.getElementsByTagName('body')[0];
    Galaxy.ui.setContent(element, module.scope.html);

    // Modules that are loaded via Galaxy.load method 
      module.start();
}); </pre>
    <p>
      A module will be activated when the # value of the url matches the id of that module.
      Then the module starts listening to the state (url) changes.
    </p>
    <p>
      There is a shorter version for the top code.
    </p>
    <pre class="prettyprint lang-js">
var element = document.getElementsByTagName('body')[0];

Scope.loadModuleInto({
  // id should be equals to the url # value
  // otherwise the module will be not registered
  id: 'my-module' 
  url: 'path/to/module.html'
}, element); </pre>
    <p>
      Or in the case you have ui-view, then you can load the module into it like this
    </p>
    <pre class="prettyprint lang-js">
Scope.loadModuleInto({
  // id should be equals to the url # value
  // otherwise the module will be not registered
  id: 'my-module'
  url: 'path/to/module.html'
}, Scope.views['ui-view-name']); </pre>

    <h2>
      Galaxy.GalaxyScope
    </h2>
    <ul>
      <li>
        <strong>systemId</strong>
        The ID given to this module by the system
      </li>
      <li>
        <strong>views</strong>
        Reference to the ui-view elements
      </li>
      <li>
        <strong>parentScope</strong>
        Scope of the parent module or null if there is not parent module
      </li>
    </ul>
    <p>
      Scope is a part of module and it's the main point for interaction with module.
    </p>
    <p>
      If you look at a module as like car, then the scope would be the driver space. Driver does not need to know how
      the engine works. He/She only needs to push the gas pedal.
    </p>
    <p>
      You can import add-on via <code>Scope.import</code>. This will create and add the add-on instance to the module and
      also returns the add-on instance.
    </p>
    <pre class="prettyprint lang-js">
// This line create state handler add-on for the current module
var state = Scope.import('galaxy/scope-state'); // return the handler add-on

state.onInit = function () {
  // Called first time the module is loaded
};

state.onStart = function () {
  // Called every time the module is started
};

state.onStop = function () {
  // Called every time the module is deactivated,
  // for example when the # value of url
  // changes to something other than the module id
}; </pre>

  </section>

  <section class="content">
    <h2>
      Galaxy.GalaxyUI
    </h2>
    <p>

    </p>
  </section>
</div>

<script>

  var state = Scope.import('galaxy/scope-state');
  var subSections = {
    'galaxy-system': {},
    'galaxy-module': {},
    'galaxy-ui': {},
    'galaxy-helpers': {}
  };

  state.onInit = function () {
    console.log('API inited');

    state.on('#', function (full, app) {
      if (subSections[ app ]) {
        console.log(full, app);
      } else if (app) {
        Scope.loadModuleInto({
          id: '404',
          url: 'modules/404/index.html'
        }, Scope.views[ 'main-content' ]);
      } else {

      }
    });
  };

  state.onStart = function () {
    PR.prettyPrint();
  };

</script>
